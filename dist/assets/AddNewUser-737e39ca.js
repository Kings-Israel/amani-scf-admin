import{_ as Q}from"./AppTextField.vue_vue_type_script_setup_true_lang-298ad98d.js";import{_ as X}from"./AppSelect.vue_vue_type_script_setup_true_lang-67ce80f3.js";import{_ as Y}from"./AppStepper.vue_vue_type_style_index_0_lang-ef456a65.js";import{d as Z,l as ee,r as u,b6 as le,R as V,w as ae,cl as oe,o as p,c as C,b as l,f as a,x as w,y as te,p as r,aI as y,z as re,F as U,j as se,e as me,a4 as ue,aM as ne,h as f,A as T}from"./index-5caaa453.js";import{u as pe}from"./useApi-c9327355.js";import{c as ce}from"./createUrl-3e678c2b.js";import{r as n,e as de}from"./validators-db74a876.js";import{$ as x}from"./api-44dd0fa9.js";import{V as A}from"./VSnackbar-ea7773d7.js";import{V as D}from"./VRow-e44df108.js";import{V as c}from"./VCol-bcc5388c.js";import{V as M}from"./VCardText-3b4da816.js";import{V as ie}from"./VForm-ed4803d2.js";import{V as ye,a as B}from"./VWindowItem-1e406499.js";import{V as be}from"./VCard-1a5b2c5e.js";import"./form-c9c578a3.js";import"./VTextField-604d91ff.js";/* empty css                   */import"./VCounter-728f7f8c.js";import"./transition-1886cce0.js";import"./VField-6b3808ed.js";import"./easing-9f15041e.js";import"./VInput-e87890b4.js";import"./forwardRefs-8348545e.js";import"./index-7dd1f5f0.js";import"./VSelect-f0a443ce.js";import"./VList-4b1bf96e.js";import"./ssrBoot-2696bccc.js";import"./createSimpleFunctional-9624028d.js";import"./VAvatar-3ee4c690.js";import"./VImg-6009f8f0.js";import"./VDivider-d40713ce.js";import"./dialog-transition-1ae6ec72.js";import"./VMenu-97c48b4e.js";import"./VOverlay-da001e16.js";import"./lazy-9cd674a5.js";import"./scopeId-484eb469.js";import"./VCheckboxBtn-1d552264.js";import"./VSelectionControl-e0df1dbd.js";import"./VChip-49676f7d.js";import"./VSlideGroup-1fe3f4d3.js";import"./VSlideGroupItem-01cf7141.js";import"./index-2898f57d.js";import"./helpers-681711bc.js";/* empty css              */const Ve={class:"d-flex flex-wrap gap-4 justify-sm-space-between justify-center mt-8"},nl=Z({__name:"AddNewUser",async setup(fe){let h,F;const $=[{title:"User Details",icon:"tabler-building",subtitle:"Setup account details"}],I=ee(),S=u([]),R=u([]),d=u(0),b=u("CRM"),i=u("Dealer"),j={module:"CRM",category:"",role:"",firstName:"",lastName:"",email:"",contactNumber:""},s=u(structuredClone(j)),{data:z,execute:L}=([h,F]=le(()=>pe(ce("/admin/get/UI/user/roles",{query:{module:b,roleType:i}}))),h=await h,F(),h),O=V(()=>z.value),q=[{key:"firstName",show:!0,type:"text",model:"firstName",label:"First Name",placeholder:"Enter First Name",rules:[n]},{key:"lastName",type:"text",model:"lastName",label:"Last Name",placeholder:"Enter Last Name",rules:[n]},{key:"email",show:!0,type:"email",model:"email",label:"Email",placeholder:"Enter Email",rules:[n,de]},{key:"contactNumber",type:"text",show:!0,model:"contactNumber",label:"Contact No.",placeholder:"Enter Contact Number",rules:[n]}],W=[{key:"typeOfModule",type:"select",show:!1,model:"selectedModule",label:"Module",placeholder:"Module",items:["Bank","CRM","Admin"],rules:[n]}],P=V(()=>[{key:"bank",type:"select",show:!0,model:"bank",label:"Bank",placeholder:"Select Bank",items:S.value,rules:[n]}]),G=V(()=>[{key:"roles",type:"select",show:!0,model:"role",label:"Role",placeholder:"Role",items:O.value,rules:[n]}]),H=V(()=>[{key:"company",type:"select",model:"company",label:"Companies",placeholder:"Select Company",items:R.value,rules:[n]},{key:"roleTypes",type:"select",show:!1,value:i,model:i,label:"Different Role Types",placeholder:"Role Types",rules:[n],items:["Dealer","Vendor","Anchor"]}]);ae(b,o=>{s.value.module=o}),oe(async()=>{S.value=await x("/get/banks/names"),R.value=await x("/company/names")});const k=u(!1),_=u(!1),J=V(()=>{let o=[...W];return s.value.module==="Bank"?o=o.concat(P.value):s.value.module==="Company"&&(o=o.concat(H.value)),o=o.concat(G.value),o.concat(q)}),g=u(""),K=async()=>{try{const o=await x("/auth/UI/add/user",{method:"POST",body:s.value,onResponseError({response:v}){console.log("Error",v),g.value=v._data,_.value=!0}}),{message:t}=o;k.value=!0,console.log(t),await ne(()=>{I.push("/users/list")})}catch(o){console.error(o)}};return L(),(o,t)=>{const v=Y,N=X,E=Q;return p(),C(U,null,[l(A,{modelValue:r(_),"onUpdate:modelValue":t[0]||(t[0]=e=>y(_)?_.value=e:null),color:"error",location:"top end",variant:"flat"},{default:a(()=>[w(te(r(g)),1)]),_:1},8,["modelValue"]),l(A,{modelValue:r(k),"onUpdate:modelValue":t[1]||(t[1]=e=>y(k)?k.value=e:null),color:"success",location:"top end",variant:"flat"},{default:a(()=>[w(" User Created Successfully ")]),_:1},8,["modelValue"]),l(be,null,{default:a(()=>[l(D,null,{default:a(()=>[l(c,{class:re(o.$vuetify.display.smAndDown?"border-b":"border-e"),cols:"12",md:"4"},{default:a(()=>[l(M,null,{default:a(()=>[l(v,{"current-step":r(d),"onUpdate:currentStep":t[2]||(t[2]=e=>y(d)?d.value=e:null),items:$,class:"stepper-icon-step-bg",direction:"vertical","icon-size":"24"},null,8,["current-step"])]),_:1})]),_:1},8,["class"]),l(c,{cols:"12",md:"8"},{default:a(()=>[l(M,null,{default:a(()=>[l(ie,null,{default:a(()=>[l(ye,{modelValue:r(d),"onUpdate:modelValue":t[5]||(t[5]=e=>y(d)?d.value=e:null),class:"disable-tab-transition"},{default:a(()=>[l(B,null,{default:a(()=>[l(D,null,{default:a(()=>[(p(!0),C(U,null,se(r(J),e=>(p(),C(U,{key:e.key},[e.type==="select"&&e.key==="typeOfModule"&&!e.show?(p(),f(c,{key:0,cols:"12",md:"6"},{default:a(()=>[l(N,{modelValue:r(b),"onUpdate:modelValue":t[3]||(t[3]=m=>y(b)?b.value=m:null),items:e.items,label:e.label,placeholder:e.placeholder,rules:e.rules},null,8,["modelValue","items","label","placeholder","rules"])]),_:2},1024)):T("",!0),e.type==="select"&&e.key==="roleTypes"&&!e.show?(p(),f(c,{key:1,cols:"12",md:"6"},{default:a(()=>[l(N,{modelValue:r(i),"onUpdate:modelValue":t[4]||(t[4]=m=>y(i)?i.value=m:null),items:e.items,label:e.label,placeholder:e.placeholder,rules:e.rules},null,8,["modelValue","items","label","placeholder","rules"])]),_:2},1024)):e.type==="select"&&e.show?(p(),f(c,{key:2,cols:"12",md:"6"},{default:a(()=>[l(N,{modelValue:r(s)[e.model],"onUpdate:modelValue":m=>r(s)[e.model]=m,items:e.items,label:e.label,placeholder:e.placeholder,rules:e.rules},null,8,["modelValue","onUpdate:modelValue","items","label","placeholder","rules"])]),_:2},1024)):e.type==="text"?(p(),f(c,{key:3,cols:"12",md:"6"},{default:a(()=>[l(E,{modelValue:r(s)[e.model],"onUpdate:modelValue":m=>r(s)[e.model]=m,label:e.label,placeholder:e.placeholder,readonly:e.readonly,rules:e.rules},null,8,["modelValue","onUpdate:modelValue","label","placeholder","readonly","rules"])]),_:2},1024)):e.type==="email"?(p(),f(c,{key:4,cols:"12",md:"6"},{default:a(()=>[l(E,{modelValue:r(s)[e.model],"onUpdate:modelValue":m=>r(s)[e.model]=m,label:e.label,placeholder:e.placeholder,readonly:e.readonly,rules:e.rules},null,8,["modelValue","onUpdate:modelValue","label","placeholder","readonly","rules"])]),_:2},1024)):T("",!0)],64))),128))]),_:1})]),_:1}),l(B,null,{default:a(()=>[w(" Drafts ")]),_:1})]),_:1},8,["modelValue"]),me("div",Ve,[l(ue,{"append-icon":"tabler-check",color:"success",onClick:K},{default:a(()=>[w(" submit ")]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}}});export{nl as default};
