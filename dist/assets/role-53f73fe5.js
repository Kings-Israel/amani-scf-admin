import{_ as H}from"./AddEditPermissionDialog.vue_vue_type_style_index_0_lang-9551c6a8.js";import{_ as J}from"./AppDateTimePicker.vue_vue_type_style_index_0_lang-56955411.js";import{_ as K}from"./AppSelect.vue_vue_type_script_setup_true_lang-67ce80f3.js";import{_ as Q}from"./AppTextField.vue_vue_type_script_setup_true_lang-298ad98d.js";import{p as W}from"./paginationMeta-4ad053a4.js";import{u as C}from"./useApi-c9327355.js";import{c as N}from"./createUrl-3e678c2b.js";import{$ as X}from"./api-44dd0fa9.js";import{V as S}from"./VCol-bcc5388c.js";import{V as Y}from"./VCard-1a5b2c5e.js";import{V as Z}from"./VCardText-3b4da816.js";import{d as ee,r as i,b6 as z,R as U,I as te,w as le,o as oe,h as ae,f as s,b as o,e as n,p as l,aI as r,a4 as k,x as ie,y as R,a9 as B}from"./index-5caaa453.js";import{V as M}from"./VDivider-d40713ce.js";import{V as se}from"./VDataTableServer-64dc84b4.js";import{V as re}from"./VPagination-4169e3c5.js";import{V as ne}from"./VRow-e44df108.js";import"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-9e7a34d5.js";import"./VForm-ed4803d2.js";import"./form-c9c578a3.js";import"./forwardRefs-8348545e.js";import"./VAlert-009fe8a7.js";import"./createSimpleFunctional-9624028d.js";import"./VDialog-808ce03e.js";import"./VOverlay-da001e16.js";import"./easing-9f15041e.js";import"./lazy-9cd674a5.js";import"./scopeId-484eb469.js";import"./transition-1886cce0.js";import"./dialog-transition-1ae6ec72.js";import"./VField-6b3808ed.js";import"./VInput-e87890b4.js";import"./VSelect-f0a443ce.js";import"./VTextField-604d91ff.js";/* empty css                   */import"./VCounter-728f7f8c.js";import"./index-7dd1f5f0.js";import"./VList-4b1bf96e.js";import"./ssrBoot-2696bccc.js";import"./VAvatar-3ee4c690.js";import"./VImg-6009f8f0.js";import"./VMenu-97c48b4e.js";import"./VCheckboxBtn-1d552264.js";import"./VSelectionControl-e0df1dbd.js";import"./VChip-49676f7d.js";import"./index-2898f57d.js";/* empty css              */import"./VDataTable-1493872b.js";import"./VTable-f9bab7db.js";import"./filter-aecd5fc1.js";const me=n("h5",{class:"text-h4 mb-6"}," Roles List ",-1),pe={class:"d-flex align-center gap-4 flex-wrap"},de={cols:"12",md:"3"},ue={cols:"12",md:"3"},ce={class:"d-flex align-center gap-4 flex-wrap"},fe={class:"d-flex align-center justify-space-between flex-wrap gap-3 pa-5 pt-3"},ve={class:"text-sm text-medium-emphasis mb-0"},ct=ee({__name:"role",async setup(ge){let d,f;const O=[{title:"ID",key:"id",sortable:!1},{title:"Role",key:"RoleName",sortable:!1},{title:"Role Type",key:"RoleTypeName",sortable:!1},{title:"Role Description",key:"RoleDescription",sortable:!1},{title:"Created At",key:"created_at",sortable:!1},{title:"Total Permissions",key:"role_i_ds_count",sortable:!1},{title:"Actions",key:"actions",sortable:!1}],v=i(""),m=i(10),p=i(1),h=i(),T=i(),g=i(),_=i([]),{data:j,execute:Ve}=([d,f]=z(()=>C(N("/UI/roles/permissions"))),d=await d,f(),d),b=U(()=>j.value),u=i(),q=a=>{var e,y;p.value=a.page,h.value=(e=a.sortBy[0])==null?void 0:e.key,T.value=(y=a.sortBy[0])==null?void 0:y.order},D=i(!1),x=i(!1),w=i(""),P=i(""),{data:$,execute:c}=([d,f]=z(()=>C(N("/UI/all/roles/data",{query:{q:v,roleType:u,itemsPerPage:m,page:p,createdAt:g,sortBy:h,orderBy:T}}))),d=await d,f(),d),F=U(()=>$.value.permissions),V=U(()=>$.value.totalPermissions);_.value=b.value.map(a=>a.name);const L=async a=>{await X("/UI/delete/role",{method:"POST",body:{role_id:a}}),await c()};return te(async()=>{await c(),_.value=b.value.map(a=>a.name),le(u,a=>{b.value.find(e=>e.name===a)},{immediate:!0})}),(a,e)=>{const y=Q,A=K,E=J,I=H;return oe(),ae(ne,null,{default:s(()=>[o(S,{cols:"12"},{default:s(()=>[me]),_:1}),o(S,{cols:"12"},{default:s(()=>[o(Y,null,{default:s(()=>[o(Z,{class:"d-flex align-center justify-space-between flex-wrap gap-4"},{default:s(()=>[n("div",pe,[n("div",null,[o(y,{modelValue:l(v),"onUpdate:modelValue":e[0]||(e[0]=t=>r(v)?v.value=t:null),density:"compact",placeholder:"Search",style:{"inline-size":"12.5rem"}},null,8,["modelValue"])]),n("div",de,[o(A,{modelValue:l(u),"onUpdate:modelValue":e[1]||(e[1]=t=>r(u)?u.value=t:null),items:l(_),placeholder:"Select Role Type",style:{"inline-size":"12.5rem"}},null,8,["modelValue","items"])]),n("div",ue,[o(E,{modelValue:l(g),"onUpdate:modelValue":e[2]||(e[2]=t=>r(g)?g.value=t:null),class:"me-3","clear-icon":"tabler-x",clearable:"",placeholder:"Select Date",style:{"inline-size":"200px"}},null,8,["modelValue"])])]),n("div",ce,[o(A,{items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],"model-value":l(m),style:{"inline-size":"5rem"},"onUpdate:modelValue":e[3]||(e[3]=t=>m.value=parseInt(t,10))},null,8,["model-value"]),o(k,{density:"default",onClick:e[4]||(e[4]=t=>a.$router.push("/users/permission"))},{default:s(()=>[ie(" Add Role ")]),_:1})])]),_:1}),o(M),o(l(se),{"items-per-page":l(m),"onUpdate:itemsPerPage":e[6]||(e[6]=t=>r(m)?m.value=t:null),page:l(p),"onUpdate:page":e[7]||(e[7]=t=>r(p)?p.value=t:null),headers:O,items:l(F),"items-length":l(V),"items-per-page-options":[{value:5,title:"5"},{value:10,title:"10"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],class:"text-no-wrap","onUpdate:options":q},{"item.created_at":s(({item:t})=>[n("span",null,R(new Date(t.created_at).toISOString().split("T")[0]),1)]),bottom:s(()=>[o(M),n("div",fe,[n("p",ve,R(l(W)({page:l(p),itemsPerPage:l(m)},l(V))),1),o(re,{modelValue:l(p),"onUpdate:modelValue":e[5]||(e[5]=t=>r(p)?p.value=t:null),length:Math.ceil(l(V)/l(m)),"total-visible":a.$vuetify.display.xs?1:Math.min(Math.ceil(l(V)/l(m)),5),"active-color":"primary","next-icon":"tabler-caret-right","prev-icon":"tabler-caret-left"},null,8,["modelValue","length","total-visible"])])]),"item.createdDate":s(({item:t})=>[n("span",null,R(t.createdDate.toLocaleString()),1)]),"item.actions":s(({item:t})=>[o(k,{color:"medium-emphasis",icon:"",size:"small",variant:"text",onClick:G=>a.$router.push(`/users/edit-role/${t.id}`)},{default:s(()=>[o(B,{icon:"tabler-edit",size:"22"})]),_:2},1032,["onClick"]),o(k,{color:"medium-emphasis",icon:"",size:"small",variant:"text",onClick:G=>L(t.id)},{default:s(()=>[o(B,{icon:"tabler-trash",size:"22"})]),_:2},1032,["onClick"])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1}),o(I,{isDialogVisible:l(D),"onUpdate:isDialogVisible":e[8]||(e[8]=t=>r(D)?D.value=t:null),permissionName:l(w),"onUpdate:permissionName":e[9]||(e[9]=t=>r(w)?w.value=t:null),permissionID:l(P),"onUpdate:permissionID":e[10]||(e[10]=t=>r(P)?P.value=t:null),fetchData:l(c),"onUpdate:fetchData":e[11]||(e[11]=t=>r(c)?c.value=t:null)},null,8,["isDialogVisible","permissionName","permissionID","fetchData"]),o(I,{isDialogVisible:l(x),"onUpdate:isDialogVisible":e[12]||(e[12]=t=>r(x)?x.value=t:null)},null,8,["isDialogVisible"])]),_:1})]),_:1})}}});export{ct as default};
