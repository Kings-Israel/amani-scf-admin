import{V as p}from"./VDivider-fc890531.js";import{V as f}from"./VCheckbox-e2d8e1ba.js";import{V as _}from"./VCol-35b3d337.js";import{V as x}from"./VRow-d6f20668.js";import{d as B,r as R,R as U,w as v,o as c,c as i,j as g,p as h,F as V,b as a,f as d,e as k,y as $,h as D,aI as N}from"./index-75b434bc.js";const J=B({__name:"AllRoles",props:{group:{},currentdata:{},selectedIds:{}},emits:["update:selected-ids","checkboxChanged","update:selectedIds"],setup(C,{emit:I}){const n=C,u=I,l=R([]),r=(e,t)=>t.every(s=>l.value.includes(s.id)),S=e=>l.value.includes(e),y=e=>{let t;r(e.id,e.access_groups)?(t=[e.id,...e.access_groups.map(s=>s.id)],l.value=l.value.filter(s=>!t.includes(s))):(t=[e.id,...e.access_groups.map(s=>s.id)].filter(s=>!l.value.includes(s)),l.value.push(...t)),u("checkboxChanged",t)},b=e=>{S(e)?(console.log("Item is selected, will remove:",e),l.value=l.value.filter(t=>(console.log(`Comparing: ${t} !== ${e}`),t!==e))):(console.log("Item is not selected, will add:",e),l.value=[...l.value,e]),console.log("Updated selectedIds:",JSON.stringify(l.value))},w=U(()=>n.group.map(e=>({...e,isSelected:r(e.id,e.access_groups)})));return n.currentdata[0].role_i_ds.forEach(e=>{l.value.includes(e.access_right_group_id)||l.value.push(e.access_right_group_id)}),console.log(l.value),v(()=>n.selectedIds,e=>u("update:selectedIds",e)),v(l,e=>{u("update:selected-ids",e)},{deep:!0}),(e,t)=>(c(!0),i(V,null,g(h(w),s=>(c(),i("div",{key:s.id},[a(p,{class:"my-4"}),a(_,null,{default:d(()=>[a(f,{modelValue:s.isSelected,"onUpdate:modelValue":o=>s.isSelected=o,checked:s.isSelected,onClick:o=>y(s)},{label:d(()=>[k("div",null,[k("strong",null,$(s.name),1)])]),_:2},1032,["modelValue","onUpdate:modelValue","checked","onClick"])]),_:2},1024),a(p,{class:"my-4"}),a(x,null,{default:d(()=>[(c(!0),i(V,null,g(s.access_groups,o=>(c(),D(_,{key:o.id,cols:"12",md:"6"},{default:d(()=>[a(f,{modelValue:h(l),"onUpdate:modelValue":t[0]||(t[0]=m=>N(l)?l.value=m:null),label:o.name,value:o.id,onClick:m=>b(o.id)},null,8,["modelValue","label","value","onClick"])]),_:2},1024))),128))]),_:2},1024)]))),128))}});export{J as _};
