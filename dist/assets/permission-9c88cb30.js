import{r as y}from"./validators-db74a876.js";import{_ as j}from"./AppTextField.vue_vue_type_script_setup_true_lang-298ad98d.js";import{_ as z}from"./AppSelect.vue_vue_type_script_setup_true_lang-67ce80f3.js";import{_ as M}from"./AppStepper.vue_vue_type_style_index_0_lang-ef456a65.js";import{_ as W}from"./AllRoles.vue_vue_type_script_setup_true_lang-c8f6f40b.js";import{d as O,r as u,l as P,b6 as k,R as G,w,I as H,o as N,c as J,b as l,f as a,x as h,z as K,p as d,e as g,a4 as L,h as Q,A as X,F as Y,aM as Z}from"./index-5caaa453.js";import{$ as ee}from"./api-44dd0fa9.js";import{u as oe}from"./useApi-c9327355.js";import{c as le}from"./createUrl-3e678c2b.js";import{V as ae}from"./VSnackbar-ea7773d7.js";import{V as te}from"./VCard-1a5b2c5e.js";import{V as D}from"./VRow-e44df108.js";import{V as n}from"./VCol-bcc5388c.js";import{V as T}from"./VCardText-3b4da816.js";import{V as U}from"./VForm-ed4803d2.js";import{V as re,a as I}from"./VWindowItem-1e406499.js";import{V as se}from"./VDivider-d40713ce.js";import"./helpers-681711bc.js";import"./form-c9c578a3.js";import"./VTextField-604d91ff.js";/* empty css                   */import"./VCounter-728f7f8c.js";import"./transition-1886cce0.js";import"./VField-6b3808ed.js";import"./easing-9f15041e.js";import"./VInput-e87890b4.js";import"./forwardRefs-8348545e.js";import"./index-7dd1f5f0.js";import"./VSelect-f0a443ce.js";import"./VList-4b1bf96e.js";import"./ssrBoot-2696bccc.js";import"./createSimpleFunctional-9624028d.js";import"./VAvatar-3ee4c690.js";import"./VImg-6009f8f0.js";import"./dialog-transition-1ae6ec72.js";import"./VMenu-97c48b4e.js";import"./VOverlay-da001e16.js";import"./lazy-9cd674a5.js";import"./scopeId-484eb469.js";import"./VCheckboxBtn-1d552264.js";import"./VSelectionControl-e0df1dbd.js";import"./VChip-49676f7d.js";import"./VSlideGroup-1fe3f4d3.js";import"./VSlideGroupItem-01cf7141.js";import"./VCheckbox-4131d654.js";import"./index-2898f57d.js";/* empty css              */const ie=g("h6",{class:"text-h6 font-weight-medium"}," Role Information ",-1),ue=g("p",{class:"mb-0"}," Setup Information ",-1),me={class:"d-flex flex-wrap gap-4 justify-sm-space-between justify-center mt-8"},to=O({__name:"permission",async setup(ne){let m,c;const s=u([]),V=u(""),p=u("Bank"),A=u([]),v=u(""),i=u([]),x=[{title:"Role Details",subtitle:"Setup Role Details"},{title:"Draft",subtitle:"Available Drafts"}],q=P(),f=u(0),_=u(!1),$=async()=>{_.value=!0;try{const e=await ee("/UI/roles/permissions/data",{method:"POST",body:{RoleName:V.value,RoleTypeName:p.value,RoleDescription:v.value,RoleIDs:i.value},onResponseError({response:t}){console.log("Error",t)}}),{message:o}=e;console.log(o),await Z(()=>{q.push("/users/role")})}catch(e){console.error(e)}},B=e=>{(Array.isArray(e)?e:[e]).forEach(t=>{i.value.includes(t)?i.value=i.value.filter(R=>R!==t):i.value.push(t)}),console.log("Updated Role IDs",i.value)},E=e=>{e.forEach(o=>{i.value.includes(o)||i.value.push(o)})},{data:F,execute:C}=([m,c]=k(()=>oe(le("/admin/UI/roles/permissions"))),m=await m,c(),m),b=G(()=>F.value);return w(p,e=>{const o=b.value.find(t=>t.name===e);o?s.value=o.groups:s.value=[]}),w(s,e=>{s.value=e},{immediate:!0}),H(async()=>{await C(),A.value=b.value.map(e=>e.name),w(p,e=>{const o=b.value.find(t=>t.name===e);o?s.value=o.groups:s.value=[]},{immediate:!0})}),[m,c]=k(()=>C()),await m,c(),(e,o)=>{const t=M,R=z,S=j;return N(),J(Y,null,[l(ae,{modelValue:_.value,"onUpdate:modelValue":o[0]||(o[0]=r=>_.value=r),color:"success",location:"top end",variant:"flat"},{default:a(()=>[h(" New Role Added successfully ")]),_:1},8,["modelValue"]),l(d(U),null,{default:a(()=>[l(te,null,{default:a(()=>[l(D,null,{default:a(()=>[l(n,{class:K(e.$vuetify.display.smAndDown?"border-b":"border-e"),cols:"12",md:"4"},{default:a(()=>[l(T,null,{default:a(()=>[l(t,{"current-step":f.value,"onUpdate:currentStep":o[1]||(o[1]=r=>f.value=r),items:x,direction:"vertical"},null,8,["current-step"])]),_:1})]),_:1},8,["class"]),l(n,{cols:"12",md:"8"},{default:a(()=>[l(T,null,{default:a(()=>[l(d(U),null,{default:a(()=>[l(re,{modelValue:f.value,"onUpdate:modelValue":o[5]||(o[5]=r=>f.value=r),class:"disable-tab-transition"},{default:a(()=>[l(I,null,{default:a(()=>[l(D,null,{default:a(()=>[l(n,{cols:"12"},{default:a(()=>[ie,ue]),_:1}),l(n,{cols:"12",md:"6"},{default:a(()=>[l(R,{modelValue:p.value,"onUpdate:modelValue":o[2]||(o[2]=r=>p.value=r),items:A.value,rules:["requiredValidator"in e?e.requiredValidator:d(y)],label:"Role Type",placeholder:"Select Role Type"},null,8,["modelValue","items","rules"])]),_:1}),l(n,{cols:"12",md:"6"},{default:a(()=>[l(S,{modelValue:V.value,"onUpdate:modelValue":o[3]||(o[3]=r=>V.value=r),rules:["requiredValidator"in e?e.requiredValidator:d(y)],label:"Role Name",placeholder:"Role"},null,8,["modelValue","rules"])]),_:1}),l(n,{cols:"12",md:"6"},{default:a(()=>[l(S,{modelValue:v.value,"onUpdate:modelValue":o[4]||(o[4]=r=>v.value=r),rules:["requiredValidator"in e?e.requiredValidator:d(y)],label:"Role Description",placeholder:"Role Description"},null,8,["modelValue","rules"])]),_:1})]),_:1}),g("div",me,[l(L,{"append-icon":"tabler-check",color:"success",onClick:$},{default:a(()=>[h(" Submit ")]),_:1})]),l(se,{class:"my-4"}),s.value&&s.value.length>0?(N(),Q(W,{key:0,group:s.value,onCheckboxChanged:B,"onUpdate:selectedIds":E},null,8,["group"])):X("",!0)]),_:1}),l(I,null,{default:a(()=>[l(D,null,{default:a(()=>[h(" No Drafts ")]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}}});export{to as default};
