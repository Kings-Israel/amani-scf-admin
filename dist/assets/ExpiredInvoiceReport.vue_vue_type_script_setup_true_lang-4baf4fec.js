import{_ as de}from"./AppDateTimePicker.vue_vue_type_style_index_0_lang-544577ba.js";import{_ as me}from"./AppTextField.vue_vue_type_script_setup_true_lang-93dc1e26.js";import{_ as ve}from"./AppSelect.vue_vue_type_script_setup_true_lang-32a0f469.js";import{p as pe}from"./paginationMeta-4ad053a4.js";import{F as xe}from"./FileSaver.min-4f66c306.js";import{X as k}from"./xlsx-d63df831.js";import{u as fe}from"./useApi-776c55ea.js";import{c as ye}from"./createUrl-149317bf.js";import{V as Q}from"./VCol-35b3d337.js";import{d as _e,r as l,R as C,b6 as Ve,w as be,o as W,c as ge,b as a,f as n,e as s,a4 as A,x as De,p as Y,y as d,h as ke,a9 as he,t as Z,A as Ce,F as Ae,a as we}from"./index-75b434bc.js";import{V as Se}from"./VDataTableServer-e9f6b4ac.js";import{V as Ie}from"./VTooltip-c5403118.js";import{V as Be}from"./VChip-e2ddd660.js";import{V as Ue}from"./VDivider-fc890531.js";import{V as qe}from"./VPagination-2b54b87a.js";import{V as ze}from"./VRow-d6f20668.js";const Pe=s("h2",{class:"my-4 mx-5"},[s("b",null," Expired Invoices")],-1),Ee={class:"d-flex flex-wrap gap-4 mx-5 my-5"},Re={class:"d-flex align-center flex-wrap gap-4"},Ne={class:"d-flex flex-wrap gap-4 mx-5 my-5"},Fe={class:"d-flex align-center flex-wrap gap-4"},Te={class:"d-flex gap-4 flex-wrap align-center"},je={class:"d-flex align-center"},$e={class:"text-success"},Oe={class:"text-success"},Xe={class:"d-flex align-center justify-space-between flex-wrap gap-3 pa-5 pt-3"},Me={class:"text-sm text-medium-emphasis mb-0"},ut=_e({__name:"ExpiredInvoiceReport",async setup(He){let m,w;l(!0);const S=l(),v=l(),I=l(),B=l(null),p=l(null),x=l(""),f=l(""),y=l(""),_=l(),V=l(),U=l(""),b=l(""),g=l(""),q=l(""),z=l(""),P=l(),E=l(),R=l(),N=l(),F=l(),T=l(),j=l(),ee=l(),$=l(),O=l(),X=l(),i=l(50),r=l(1),te=l(),M=l(),le=[{title:"Invoice Number",key:"invoice_number"},{title:"Vendor",key:"vendor"},{title:"Bank",key:"bank"},{title:"Anchor",key:"anchor"},{title:"Date Requested",key:"date_requested"},{title:"Invoice Amount",key:"amount"},{title:"Discount Amount",key:"discount_amount"},{title:"Expiry Date",key:"expiry_date"},{title:"Invoice Due Date",key:"due_date"},{title:"Status",key:"status"}];l([{title:"Submitted",value:"submitted"},{title:"Pending Approval",value:"pending_approval"},{title:"Approved",value:"approved"},{title:"Disbursed",value:"disbursed"},{title:"Rejected",value:"denied"},{title:"Closed",value:"closed"}]);const ae=l([{title:"Invoice No. (ASC)",value:"asc_invoice_number"},{title:"Invoice No (DESC)",value:"desc_invoice_number"},{title:"Vendor (ASC)",value:"asc_vendor"},{title:"Vendor (DESC)",value:"desc_vendor"},{title:"Anchor (ASC)",value:"asc_anchor"},{title:"Anchor (DESC)",value:"desc_anchor"},{title:"Due Date (ASC)",value:"asc_due_date"},{title:"Due Date (DESC)",value:"desc_due_date"},{title:"Request Date (ASC)",value:"asc_date_requested"},{title:"Request Date (DESC)",value:"desc_date_requested"}]),oe=l([{title:"Vendor Financing",value:1},{title:"Dealer Financing",value:2}]),H=C(()=>({vendor:P.value,anchor:E.value,bank:R.value,status:S.value,program_type:v.value,sortBy:I.value,invoice_number:F.value,invoice_amount:N.value,expiry_date:T.value,due_date:j.value,request_date:ee.value,date_requested:$.value,start_date:O.value,end_date:X.value,page:r.value,itemsPerPage:i.value,orderBy:M.value})),{data:L,execute:h}=([m,w]=Ve(()=>fe(ye("/admin/expired/invoices",{query:H}))),m=await m,w(),m),G=C(()=>L.value.data),D=C(()=>L.value.total),se=o=>{var t,u;r.value=o.page,te.value=(t=o.sortBy[0])==null?void 0:t.key,M.value=(u=o.sortBy[0])==null?void 0:u.order},ne=o=>{switch(o){case"Approved":return{text:"Approved",color:"success"};case"Past Due":return{text:o,color:"error"};case"Closed":return{text:"Closed",color:"success"};case"Rejected":return{text:"Rejected",color:"error"};case"Disbursed":return{text:"Disbursed",color:"info"};default:return{text:o,color:"default"}}},J=async()=>{P.value=x.value,E.value=f.value,R.value=y.value,F.value=V.value,S.value=B.value,I.value=p.value,N.value=_.value,T.value=U.value,j.value=b.value,$.value=g.value,O.value=q.value,X.value=z.value,await h()},ie=()=>{x.value="",f.value="",y.value="",B.value=void 0,v.value=void 0,p.value=void 0,V.value=void 0,_.value=void 0,U.value=void 0,b.value=void 0,g.value=void 0,q.value=void 0,z.value=void 0,r.value=1,J()},re=()=>{const o=k.utils.json_to_sheet(G.value),t=k.utils.book_new();k.utils.book_append_sheet(t,o,"Invoices");const u=k.write(t,{bookType:"xlsx",type:"array"});xe.saveAs(new Blob([u],{type:"application/octet-stream"}),"invoices.xlsx")};return be(H,h,{immediate:!0}),h(),(o,t)=>{const u=ve,c=me,K=de,ue=we("IconBtn");return W(),ge(Ae,null,[a(Q,null,{default:n(()=>[Pe]),_:1}),a(ze,null,{default:n(()=>[s("div",Ee,[s("div",Re,[a(u,{modelValue:v.value,"onUpdate:modelValue":t[0]||(t[0]=e=>v.value=e),items:oe.value,"item-value":"value","item-title":"title",class:"me-3","clear-icon":"tabler-circle-x",clearable:"",placeholder:"Program Type",style:{flex:"1 1 auto","min-inline-size":"400px"}},null,8,["modelValue","items"])])]),s("div",Ne,[s("div",Fe,[a(c,{modelValue:V.value,"onUpdate:modelValue":t[1]||(t[1]=e=>V.value=e),class:"me-3","clear-icon":"tabler-circle-x",clearable:"",color:"primary",placeholder:"Invoice Number",style:{flex:"1 1 auto","min-inline-size":"150px"},type:"text"},null,8,["modelValue"]),a(c,{modelValue:_.value,"onUpdate:modelValue":t[2]||(t[2]=e=>_.value=e),class:"me-3","clear-icon":"tabler-circle-x",clearable:"",color:"primary",placeholder:"Invoice Amount",style:{flex:"1 1 auto","min-inline-size":"150px"},type:"text"},null,8,["modelValue"]),a(c,{modelValue:x.value,"onUpdate:modelValue":t[3]||(t[3]=e=>x.value=e),class:"me-3","clear-icon":"tabler-circle-x",clearable:"",color:"primary",placeholder:"Vendor",style:{flex:"1 1 auto","min-inline-size":"150px"},type:"text"},null,8,["modelValue"]),a(c,{modelValue:y.value,"onUpdate:modelValue":t[4]||(t[4]=e=>y.value=e),class:"me-3","clear-icon":"tabler-circle-x",clearable:"",color:"primary",placeholder:"Bank",style:{flex:"1 1 auto","min-inline-size":"150px"},type:"text"},null,8,["modelValue"]),a(c,{modelValue:f.value,"onUpdate:modelValue":t[5]||(t[5]=e=>f.value=e),class:"me-3","clear-icon":"tabler-circle-x",clearable:"",color:"primary",placeholder:"Anchor",style:{flex:"1 1 auto","min-inline-size":"150px"},type:"text"},null,8,["modelValue"]),a(K,{modelValue:g.value,"onUpdate:modelValue":t[6]||(t[6]=e=>g.value=e),class:"me-3","clear-icon":"tabler-circle-x",clearable:"",placeholder:"Request Date",style:{flex:"1 1 auto","min-inline-size":"150px"}},null,8,["modelValue"]),a(K,{modelValue:b.value,"onUpdate:modelValue":t[7]||(t[7]=e=>b.value=e),class:"me-3","clear-icon":"tabler-circle-x",clearable:"",placeholder:"Invoice Due Date",style:{flex:"1 1 auto","min-inline-size":"150px"}},null,8,["modelValue"]),a(u,{modelValue:p.value,"onUpdate:modelValue":t[8]||(t[8]=e=>p.value=e),items:ae.value,"item-value":"value","item-title":"title",class:"me-3","clear-icon":"tabler-circle-x",clearable:"",placeholder:"Sort By",style:{flex:"1 1 auto","max-inline-size":"200px","min-inline-size":"150px"}},null,8,["modelValue","items"]),a(A,{color:"primary","prepend-icon":"tabler-search",style:{"text-size-adjust":"auto","text-transform":"none"},onClick:J}),a(A,{color:"primary","prepend-icon":"tabler-refresh",style:{"text-size-adjust":"auto","text-transform":"none"},onClick:ie})]),s("div",Te,[a(u,{modelValue:i.value,"onUpdate:modelValue":t[9]||(t[9]=e=>i.value=e),items:[5,10,20,25,50,100],style:{flex:"1 1 auto"}},null,8,["modelValue"]),a(A,{color:"primary","prepend-icon":"tabler-download",style:{"text-size-adjust":"auto","text-transform":"none"},onClick:re},{default:n(()=>[De(" Export ")]),_:1})])]),a(Q,null,{default:n(()=>[a(Y(Se),{"items-per-page":i.value,"onUpdate:itemsPerPage":t[11]||(t[11]=e=>i.value=e),page:r.value,"onUpdate:page":t[12]||(t[12]=e=>r.value=e),modelValue:o.selectedCompany,"onUpdate:modelValue":t[13]||(t[13]=e=>o.selectedCompany=e),headers:le,items:G.value,"items-length":D.value,"item-key":"id",class:"text-wrap","show-select":"","onUpdate:options":se},{"item.invoice_number":n(({item:e})=>[s("div",je,[s("span",null,d(e.invoice_number),1),e.reason!=null?(W(),ke(ue,{key:0,class:"mx-1",small:"",color:"error"},{default:n(()=>[a(Ie,{bottom:""},{activator:n(({props:ce})=>[a(he,Z(ce,{icon:"tabler-info-circle",size:"15",onClick:Le=>o.openInfoDialog(e)}),null,16,["onClick"])]),default:n(()=>[s("span",null,d(e.reason),1)]),_:2},1024)]),_:2},1024)):Ce("",!0)])]),"item.amount":n(({item:e})=>[s("span",$e,d(e.amount),1)]),"item.discount_amount":n(({item:e})=>[s("span",Oe,d(e.discount_amount),1)]),"item.status":n(({item:e})=>[a(Be,Z({density:"default",label:""},ne(e.status),{class:"text-capitalize"}),null,16)]),bottom:n(()=>[a(Ue),s("div",Xe,[s("p",Me,d(Y(pe)({page:r.value,itemsPerPage:i.value},D.value)),1),a(qe,{modelValue:r.value,"onUpdate:modelValue":t[10]||(t[10]=e=>r.value=e),length:Math.ceil(D.value/i.value),"total-visible":o.$vuetify.display.xs?1:Math.min(Math.ceil(D.value/i.value),5),"active-color":"primary","next-icon":"tabler-caret-right","prev-icon":"tabler-caret-left"},null,8,["modelValue","length","total-visible"])])]),_:1},8,["items-per-page","page","modelValue","items","items-length"])]),_:1})]),_:1})],64)}}});export{ut as _};
