import{_ as ne}from"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-9e7a34d5.js";import{_ as re}from"./AppSelect.vue_vue_type_script_setup_true_lang-67ce80f3.js";import{_ as ie}from"./AppTextField.vue_vue_type_script_setup_true_lang-298ad98d.js";import{d as ue,r as n,b6 as me,R as j,o as _,c as L,b as e,f as l,e as U,p as s,aI as c,t as ce,a9 as S,a$ as de,F as H,j as pe,a4 as b,x as d,h as $,A,y as fe,aM as _e,a as ve}from"./index-5caaa453.js";import{_ as Ve}from"./EditBankDialog.vue_vue_type_style_index_0_lang-a9468319.js";import{_ as ke}from"./EditBankMasterlistDialog.vue_vue_type_style_index_0_lang-85eddf37.js";import{u as be}from"./useApi-c9327355.js";import{c as ye}from"./createUrl-3e678c2b.js";import{$ as R}from"./api-44dd0fa9.js";import{V as p}from"./VCol-bcc5388c.js";import{V as N,a as ge}from"./VCard-1a5b2c5e.js";import{V as T}from"./VCardText-3b4da816.js";import{V as xe}from"./VDataTableServer-64dc84b4.js";import{V as we}from"./VChip-49676f7d.js";import{V as Ce}from"./VForm-ed4803d2.js";import{V as P}from"./VRow-e44df108.js";import{V as Be}from"./VDialog-808ce03e.js";import"./form-c9c578a3.js";import"./VSelect-f0a443ce.js";import"./VTextField-604d91ff.js";/* empty css                   */import"./VCounter-728f7f8c.js";import"./transition-1886cce0.js";import"./VField-6b3808ed.js";import"./easing-9f15041e.js";import"./VInput-e87890b4.js";import"./forwardRefs-8348545e.js";import"./index-7dd1f5f0.js";import"./VList-4b1bf96e.js";import"./ssrBoot-2696bccc.js";import"./createSimpleFunctional-9624028d.js";import"./VAvatar-3ee4c690.js";import"./VImg-6009f8f0.js";import"./VDivider-d40713ce.js";import"./dialog-transition-1ae6ec72.js";import"./VMenu-97c48b4e.js";import"./VOverlay-da001e16.js";import"./lazy-9cd674a5.js";import"./scopeId-484eb469.js";import"./VCheckboxBtn-1d552264.js";import"./VSelectionControl-e0df1dbd.js";import"./validators-db74a876.js";import"./helpers-681711bc.js";import"./VSnackbar-ea7773d7.js";import"./index-2898f57d.js";/* empty css              */import"./VDataTable-1493872b.js";import"./VTable-f9bab7db.js";import"./filter-aecd5fc1.js";const De={class:"d-flex flex-wrap gap-4 mx-5 my-5"},Se={class:"d-flex align-center"},$e={class:"config-d-flex flex-wrap mx-5"},Ue=U("br",null,null,-1),St=ue({__name:"masterlist",async setup(he){let y,I;n(!0),n(0);const g=n(""),x=n(),w=n(10),v=n(1),F=n(),O=n(),Q=n(),V=n(null),k=n(!1),C=n(!1),i=n(!1),G=[{title:"Bank Name",key:"name"},{title:"Swift Code",key:"swift_code"},{title:"Status",key:"status"},{title:"Created At",key:"created_at"},{title:"Actions",key:"actions",sortable:!1}],J=o=>{var a,u;v.value=o.page,F.value=(a=o.sortBy[0])==null?void 0:a.key,O.value=(u=o.sortBy[0])==null?void 0:u.order},q=n([{title:"Active",value:"active"},{title:"In active",value:"inactive"}]),{data:z,execute:h}=([y,I]=me(()=>be(ye("/bank/masterlist",{query:{q:g,status:x,page:v,itemsPerPage:w,sortBy:F,orderBy:O}}))),y=await y,I(),y),K=j(()=>z.value.data),W=j(()=>z.value.total),E=n({message:void 0,statusCode:void 0}),X=o=>{V.value=o,i.value=!0},Y=o=>{V.value=o,k.value=!0},f=n([]),Z=()=>{f.value.push({bank_name:"",swift_code:"",status:"Active"})},ee=o=>{f.value.splice(o,1)},M=o=>o&&o==="active"?{color:"success",icon:"tabler-thumb-up"}:{color:"error",icon:"tabler-thumb-down"},te=o=>o==="active"?{text:"Active",color:"success"}:{text:"Inactive",color:"error"},ae=async()=>{try{for(const a of f.value){const u=await R("/post/bank/masterlist",{method:"POST",body:{bank_name:a.bank_name,swift_code:a.swift_code,status:a.status},onResponseError({response:B}){E.value=B._data.errors}})}f.value=[{bank_name:"",swift_code:"",status:""}],await _e(()=>{h()});const{message:o}=res}catch(o){console.error(o)}},le=async o=>{try{await R(`delete/bank/masterlist/${o}`,{method:"POST",onResponseError({response:a}){E.value=a._data.errors}}),await h(),i.value=!1}catch(a){console.error(a)}},oe=async o=>{await R("/activate/bank/masterlist",{method:"POST",body:{ids:o,status:Q.value}}),await h()};return(o,a)=>{const u=ie,B=re,D=ve("IconBtn"),se=ne;return _(),L(H,null,[e(P,null,{default:l(()=>[e(p,{cols:"12",md:"12"},{default:l(()=>[e(N,{class:"mt-5"},{default:l(()=>[e(T,null,{default:l(()=>[U("div",De,[U("div",Se,[e(u,{modelValue:s(g),"onUpdate:modelValue":a[0]||(a[0]=t=>c(g)?g.value=t:null),class:"me-3","clear-icon":"tabler-circle-x",clearable:"",color:"primary",placeholder:"Bank Name",style:{"inline-size":"200px"},type:"text"},null,8,["modelValue"]),e(B,{modelValue:s(x),"onUpdate:modelValue":a[1]||(a[1]=t=>c(x)?x.value=t:null),items:s(q),class:"me-3","clear-icon":"tabler-x",clearable:"",placeholder:"Status",style:{"inline-size":"200px"}},null,8,["modelValue","items"])])]),e(s(xe),{"items-per-page":s(w),"onUpdate:itemsPerPage":a[2]||(a[2]=t=>c(w)?w.value=t:null),page:s(v),"onUpdate:page":a[3]||(a[3]=t=>c(v)?v.value=t:null),headers:G,items:s(K),"items-length":s(W),class:"text-no-wrap","show-select":"","onUpdate:options":J},{"item.status":l(({item:t})=>[e(we,ce({density:"default",label:""},te(t.status)),null,16)]),"item.actions":l(({item:t})=>[e(D,{onClick:m=>Y(t)},{default:l(()=>[e(S,{icon:"tabler-pencil",color:"warning"})]),_:2},1032,["onClick"]),e(D,null,{default:l(()=>{var m,r;return[e(S,{icon:(m=M(t.status))==null?void 0:m.icon,color:(r=M(t.status))==null?void 0:r.color,title:t.status,onClick:Ae=>oe([t.id])},null,8,["icon","color","title","onClick"])]}),_:2},1024),e(D,null,{default:l(()=>[e(S,{icon:"tabler-trash",color:"danger",onClick:m=>X(t)},null,8,["onClick"])]),_:2},1024)]),_:1},8,["items-per-page","page","items","items-length"]),e(N,null,{default:l(()=>[e(ge,null,{default:l(()=>[e(Ce,{onSubmit:de(()=>{},["prevent"])},{default:l(()=>[(_(!0),L(H,null,pe(s(f),(t,m)=>(_(),$(P,{key:m},{default:l(()=>[U("div",$e,[e(p,{cols:"12",md:"2"},{default:l(()=>[e(u,{modelValue:t.bank_name,"onUpdate:modelValue":r=>t.bank_name=r,label:"Bank Name",placeholder:"Bank Name"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(p,{cols:"12",md:"2"},{default:l(()=>[e(u,{modelValue:t.swift_code,"onUpdate:modelValue":r=>t.swift_code=r,label:"Swift Code",placeholder:"Swift Code"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(p,{cols:"12",md:"2"},{default:l(()=>[e(B,{modelValue:t.status,"onUpdate:modelValue":r=>t.status=r,items:s(q),class:"me-1","clear-icon":"tabler-x",clearable:"",placeholder:"Status",style:{"inline-size":"200px"}},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),e(p,{cols:"12",md:"1"},{default:l(()=>[e(D,{onClick:r=>ee(m)},{default:l(()=>[e(S,{icon:"tabler-trash",color:"error"})]),_:2},1032,["onClick"])]),_:2},1024)])]),_:2},1024))),128)),e(P,null,{default:l(()=>[e(p,{cols:"12",md:"2",class:"text-left"},{default:l(()=>[e(b,{color:"primary",onClick:Z},{default:l(()=>[d(" Add New Bank ")]),_:1})]),_:1}),s(f).length>0?(_(),$(p,{key:0,class:"d-flex gap-4",cols:"12",md:"4"},{default:l(()=>[e(b,{type:"submit",onClick:ae},{default:l(()=>[d(" Submit ")]),_:1}),e(b,{color:"secondary",type:"reset",variant:"tonal"},{default:l(()=>[d(" Reset ")]),_:1})]),_:1})):A("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),s(k)?(_(),$(Ve,{key:0,isDialogVisible:s(k),"onUpdate:isDialogVisible":a[4]||(a[4]=t=>c(k)?k.value=t:null),bank:s(V)},null,8,["isDialogVisible","bank"])):A("",!0),s(C)?(_(),$(ke,{key:1,isDialogVisible:s(C),"onUpdate:isDialogVisible":a[5]||(a[5]=t=>c(C)?C.value=t:null)},null,8,["isDialogVisible"])):A("",!0)]),_:1}),e(Be,{modelValue:s(i),"onUpdate:modelValue":a[9]||(a[9]=t=>c(i)?i.value=t:null),persistent:"",class:"v-dialog-sm"},{default:l(()=>[e(se,{onClick:a[6]||(a[6]=t=>i.value=!s(i))}),e(N,null,{default:l(()=>[e(T,null,{default:l(()=>[d(" Are you sure you want to delete bank: "+fe(s(V).name)+"? ",1),Ue,d(" This action can not be undone. ")]),_:1}),e(T,{class:"d-flex justify-end gap-3 flex-wrap"},{default:l(()=>[e(b,{color:"secondary",variant:"tonal",onClick:a[7]||(a[7]=t=>i.value=!1)},{default:l(()=>[d(" Cancel ")]),_:1}),e(b,{color:"error",onClick:a[8]||(a[8]=t=>le(s(V).id))},{default:l(()=>[d(" Delete ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}});export{St as default};
