import{p as P}from"./paginationMeta-4ad053a4.js";import{u as S}from"./useApi-c9327355.js";import{c as U}from"./createUrl-3e678c2b.js";import{$ as M}from"./api-44dd0fa9.js";import{V as N}from"./VCardText-3b4da816.js";import{V as A}from"./VSpacer-a56288e5.js";import{V as x}from"./VDivider-d40713ce.js";import{V as D}from"./VDataTableServer-64dc84b4.js";import{V as $}from"./VChip-49676f7d.js";import{d as T,r as s,b6 as z,R as c,o as L,c as R,b as o,f as i,e as r,p as d,y as n,K as j,x as _,a4 as q}from"./index-5caaa453.js";import{V as I}from"./VPagination-4169e3c5.js";import{V as O}from"./VCard-1a5b2c5e.js";import"./index-2898f57d.js";import"./createSimpleFunctional-9624028d.js";import"./VDataTable-1493872b.js";import"./VSelect-f0a443ce.js";import"./VTextField-604d91ff.js";/* empty css                   */import"./VCounter-728f7f8c.js";import"./transition-1886cce0.js";import"./VField-6b3808ed.js";import"./form-c9c578a3.js";import"./easing-9f15041e.js";import"./VInput-e87890b4.js";import"./forwardRefs-8348545e.js";import"./index-7dd1f5f0.js";import"./VList-4b1bf96e.js";import"./ssrBoot-2696bccc.js";import"./VAvatar-3ee4c690.js";import"./VImg-6009f8f0.js";import"./dialog-transition-1ae6ec72.js";import"./VMenu-97c48b4e.js";import"./VOverlay-da001e16.js";import"./lazy-9cd674a5.js";import"./scopeId-484eb469.js";import"./VCheckboxBtn-1d552264.js";import"./VSelectionControl-e0df1dbd.js";import"./VTable-f9bab7db.js";import"./filter-aecd5fc1.js";const E=[{title:"Notification",key:"combined"},{title:"Date",key:"formatted_created_at"},{title:"Action",key:"actions"}],K={class:"d-flex flex-wrap gap-4 mx-5"},Q=r("h4",{class:"text-h4 text-high-emphasis mb-1"}," All Notifications ",-1),F={class:"d-flex justify-between w-100"},G={class:"font-weight-bold"},H={class:"d-flex align-center justify-space-between flex-wrap gap-3 pa-5 pt-3"},J={class:"text-sm text-medium-emphasis mb-0"},Lt=T({__name:"index",async setup(W){let p,f;const V=s("");s(!0),s(0);const w=s([]),m=s(10),l=s(1),v=s(),g=s(),b=e=>{var a,t;l.value=e.page,v.value=(a=e.sortBy[0])==null?void 0:a.key,g.value=(t=e.sortBy[0])==null?void 0:t.order};s([{isSeen:"true",value:"true"},{isSeen:"false",value:"false"}]);const{data:h,execute:y}=([p,f]=z(()=>S(U("/get/admin/UI/notifications/all",{query:{q:V,itemsPerPage:m,page:l,sortBy:v,orderBy:g}}))),p=await p,f(),p),k=c(()=>h.value.data),u=c(()=>h.value.total),C=e=>e.toLowerCase()==="unread"?"warning":"success";c(()=>w.value.length<1),s(!1);const B=async e=>{await M("/notifications/mark/read",{method:"POST",body:{id:e}}),await y()};return y(),(e,a)=>(L(),R("section",null,[o(O,null,{default:i(()=>[o(N,{class:"d-flex flex-wrap py-4 gap-4"},{default:i(()=>[r("div",K,[Q,o(A)])]),_:1}),o(x),o(d(D),{"items-per-page":m.value,"onUpdate:itemsPerPage":a[1]||(a[1]=t=>m.value=t),page:l.value,"onUpdate:page":a[2]||(a[2]=t=>l.value=t),headers:d(E),items:k.value,"items-length":u.value,class:"text-no-wrap","expand-on-click":"","onUpdate:options":b},{"item.combined":i(({item:t})=>[r("div",F,[r("div",G,n(t.title)+" : ",1),r("div",null,n(t.subtitle),1)])]),"item.amount":i(({item:t})=>[r("span",{style:j({color:e.$vuetify.theme.global.current.colors.success})},n(t.amount),5)]),"item.status":i(({item:t})=>[o($,{color:C(t.status),class:"text-capitalize",size:"small"},{default:i(()=>[_(n(t.status),1)]),_:2},1032,["color"])]),"item.actions":i(({item:t})=>[o(q,{onClick:X=>B(t.id),color:"primary",small:""},{default:i(()=>[_("Mark as Read")]),_:2},1032,["onClick"])]),bottom:i(()=>[o(x),r("div",H,[r("p",J,n(d(P)({page:l.value,itemsPerPage:m.value},u.value)),1),o(I,{modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=t=>l.value=t),length:Math.min(Math.ceil(u.value/m.value),5),"total-visible":e.$vuetify.display.xs?1:Math.min(Math.ceil(u.value/m.value),5)},null,8,["modelValue","length","total-visible"])])]),_:1},8,["items-per-page","page","headers","items","items-length"])]),_:1})]))}});export{Lt as default};
