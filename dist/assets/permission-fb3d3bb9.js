import{r as y}from"./validators-db74a876.js";import{_ as j}from"./AppTextField.vue_vue_type_script_setup_true_lang-93dc1e26.js";import{_ as z}from"./AppSelect.vue_vue_type_script_setup_true_lang-32a0f469.js";import{_ as W}from"./AppStepper.vue_vue_type_style_index_0_lang-c08c6f80.js";import{i as k}from"./index-4532b75c.js";import{_ as O}from"./AllRoles.vue_vue_type_script_setup_true_lang-50aac8e4.js";import{d as P,r as u,l as G,b6 as N,R as H,w,I as J,o as T,c as K,b as l,f as a,x as h,z as L,p as f,e as A,a4 as Q,h as X,A as Y,F as Z,aM as ee}from"./index-75b434bc.js";import{$ as oe}from"./api-0c1dfdf3.js";import{u as le}from"./useApi-776c55ea.js";import{c as ae}from"./createUrl-149317bf.js";import{V as te}from"./VSnackbar-f21966b4.js";import{V as re}from"./VCard-95c0d706.js";import{V as g}from"./VRow-d6f20668.js";import{V as n}from"./VCol-35b3d337.js";import{V as U}from"./VCardText-76f31582.js";import{V as I}from"./VForm-e46f5921.js";import{V as se,a as x}from"./VWindowItem-04415d19.js";import{V as ie}from"./VDivider-fc890531.js";import"./helpers-681711bc.js";import"./form-2b416184.js";import"./VTextField-05e93cc8.js";/* empty css                   */import"./VCounter-3e4b236e.js";import"./transition-6afda34e.js";import"./VField-82993695.js";import"./easing-9f15041e.js";import"./VInput-b46333d7.js";import"./forwardRefs-8348545e.js";import"./index-97808f23.js";import"./VSelect-54e8b29a.js";import"./VList-c7d4c8b4.js";import"./ssrBoot-7f224ca6.js";import"./createSimpleFunctional-4b3a0a39.js";import"./VAvatar-071125b9.js";import"./VImg-ba4b392a.js";import"./dialog-transition-14fdab67.js";import"./VMenu-3f143933.js";import"./VOverlay-0b79a00d.js";import"./lazy-0bb5e457.js";import"./scopeId-ee2feb8e.js";import"./VCheckboxBtn-0f22f589.js";import"./VSelectionControl-e1264669.js";import"./VChip-e2ddd660.js";import"./VSlideGroup-3e745b05.js";import"./VSlideGroupItem-95742265.js";import"./VCheckbox-e2d8e1ba.js";import"./index-2898f57d.js";/* empty css              */const ue=A("h6",{class:"text-h6 font-weight-medium"}," Role Information ",-1),me=A("p",{class:"mb-0"}," Setup Information ",-1),ne={class:"d-flex flex-wrap gap-4 justify-sm-space-between justify-center mt-8"},so=P({__name:"permission",async setup(pe){let m,V;const s=u([]),_=u(""),p=u("Bank"),C=u([]),R=u(""),i=u([]),q=[{title:"Role Details",subtitle:"Setup Role Details"}],$=G(),v=u(0),D=u(!1),B=async()=>{try{const e=await oe("/UI/roles/permissions/data",{method:"POST",body:{RoleName:_.value,RoleTypeName:p.value,RoleDescription:R.value,RoleIDs:i.value},onResponseError({response:t}){var c;console.error("Error",t);const d=((c=t._data)==null?void 0:c.message)||"An error occurred while saving role permissions.";k.error(d)}}),{message:o}=e;k.success(o||"Role permissions saved successfully."),await ee(()=>{$.push("/users/role")})}catch(e){console.error(e)}},E=e=>{(Array.isArray(e)?e:[e]).forEach(t=>{i.value.includes(t)?i.value=i.value.filter(d=>d!==t):i.value.push(t)}),console.log("Updated Role IDs",i.value)},F=e=>{e.forEach(o=>{i.value.includes(o)||i.value.push(o)})},{data:M,execute:S}=([m,V]=N(()=>le(ae("/admin/UI/roles/permissions"))),m=await m,V(),m),b=H(()=>M.value);return w(p,e=>{const o=b.value.find(t=>t.name===e);o?s.value=o.groups:s.value=[]}),w(s,e=>{s.value=e},{immediate:!0}),J(async()=>{await S(),C.value=b.value.map(e=>e.name),w(p,e=>{const o=b.value.find(t=>t.name===e);o?s.value=o.groups:s.value=[]},{immediate:!0})}),[m,V]=N(()=>S()),await m,V(),(e,o)=>{const t=W,d=z,c=j;return T(),K(Z,null,[l(te,{modelValue:D.value,"onUpdate:modelValue":o[0]||(o[0]=r=>D.value=r),color:"success",location:"top end",variant:"flat"},{default:a(()=>[h(" New Role Added successfully ")]),_:1},8,["modelValue"]),l(f(I),null,{default:a(()=>[l(re,null,{default:a(()=>[l(g,null,{default:a(()=>[l(n,{class:L(e.$vuetify.display.smAndDown?"border-b":"border-e"),cols:"12",md:"4"},{default:a(()=>[l(U,null,{default:a(()=>[l(t,{"current-step":v.value,"onUpdate:currentStep":o[1]||(o[1]=r=>v.value=r),items:q,direction:"vertical"},null,8,["current-step"])]),_:1})]),_:1},8,["class"]),l(n,{cols:"12",md:"8"},{default:a(()=>[l(U,null,{default:a(()=>[l(f(I),null,{default:a(()=>[l(se,{modelValue:v.value,"onUpdate:modelValue":o[5]||(o[5]=r=>v.value=r),class:"disable-tab-transition"},{default:a(()=>[l(x,null,{default:a(()=>[l(g,null,{default:a(()=>[l(n,{cols:"12"},{default:a(()=>[ue,me]),_:1}),l(n,{cols:"12",md:"6"},{default:a(()=>[l(d,{modelValue:p.value,"onUpdate:modelValue":o[2]||(o[2]=r=>p.value=r),items:C.value,rules:["requiredValidator"in e?e.requiredValidator:f(y)],label:"Role Type",placeholder:"Select Role Type"},null,8,["modelValue","items","rules"])]),_:1}),l(n,{cols:"12",md:"6"},{default:a(()=>[l(c,{modelValue:_.value,"onUpdate:modelValue":o[3]||(o[3]=r=>_.value=r),rules:["requiredValidator"in e?e.requiredValidator:f(y)],label:"Role Name",placeholder:"Role"},null,8,["modelValue","rules"])]),_:1}),l(n,{cols:"12",md:"6"},{default:a(()=>[l(c,{modelValue:R.value,"onUpdate:modelValue":o[4]||(o[4]=r=>R.value=r),rules:["requiredValidator"in e?e.requiredValidator:f(y)],label:"Role Description",placeholder:"Role Description"},null,8,["modelValue","rules"])]),_:1})]),_:1}),A("div",ne,[l(Q,{"append-icon":"tabler-check",color:"success",onClick:B},{default:a(()=>[h(" Submit ")]),_:1})]),l(ie,{class:"my-4"}),s.value&&s.value.length>0?(T(),X(O,{key:0,group:s.value,onCheckboxChanged:E,"onUpdate:selectedIds":F},null,8,["group"])):Y("",!0)]),_:1}),l(x,null,{default:a(()=>[l(g,null,{default:a(()=>[h(" No Drafts ")]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}}});export{so as default};
