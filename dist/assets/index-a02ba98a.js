import{_ as ne}from"./AppSelect.vue_vue_type_script_setup_true_lang-67ce80f3.js";import{_ as re}from"./AppDateTimePicker.vue_vue_type_style_index_0_lang-56955411.js";import{_ as ie}from"./AppTextField.vue_vue_type_script_setup_true_lang-298ad98d.js";import{F as ue}from"./FileSaver.min-162ac943.js";import{X as D}from"./xlsx-d63df831.js";import{u as T}from"./useApi-c9327355.js";import{c as R}from"./createUrl-3e678c2b.js";import{d as te,r as o,b6 as q,R as X,o as h,h as A,f as a,e as y,b as e,p as l,aI as r,a4 as le,t as ce,w as de,x as J,y as z,A as S,a9 as W,a as pe,I as ve,c as _e,j as ye,F as fe}from"./index-5caaa453.js";import{V as ge}from"./VDataTableServer-64dc84b4.js";import{V as xe}from"./VChip-49676f7d.js";import{V as w}from"./VCol-bcc5388c.js";import{V as K}from"./VRow-e44df108.js";import{$ as Ve}from"./api-44dd0fa9.js";import{V as Z}from"./VCardText-3b4da816.js";import{V as be}from"./VAvatar-3ee4c690.js";import{V as ke}from"./VDataTable-1493872b.js";import{V as ee}from"./VCard-1a5b2c5e.js";import{_ as we,a as he,b as $e,c as Ce}from"./EcommerceTotalProfitLineCharts.vue_vue_type_script_setup_true_lang-eb24fd7d.js";import{_ as Ae}from"./HomeEarningReportsYearlyOverview.vue_vue_type_script_setup_true_lang-cc61ea62.js";import{V as De,a as Pe}from"./VTabs-423f31b3.js";import{V as Ue,a as se}from"./VWindowItem-1e406499.js";import"./form-c9c578a3.js";import"./VSelect-f0a443ce.js";import"./VTextField-604d91ff.js";/* empty css                   */import"./VCounter-728f7f8c.js";import"./transition-1886cce0.js";import"./VField-6b3808ed.js";import"./easing-9f15041e.js";import"./VInput-e87890b4.js";import"./forwardRefs-8348545e.js";import"./index-7dd1f5f0.js";import"./VList-4b1bf96e.js";import"./ssrBoot-2696bccc.js";import"./createSimpleFunctional-9624028d.js";import"./VDivider-d40713ce.js";import"./dialog-transition-1ae6ec72.js";import"./VMenu-97c48b4e.js";import"./VOverlay-da001e16.js";import"./lazy-9cd674a5.js";import"./scopeId-484eb469.js";import"./VCheckboxBtn-1d552264.js";import"./VSelectionControl-e0df1dbd.js";import"./index-2898f57d.js";import"./VTable-f9bab7db.js";/* empty css              */import"./VImg-6009f8f0.js";import"./filter-aecd5fc1.js";import"./vue3-apexcharts-fbda9a54.js";import"./VSlideGroup-1fe3f4d3.js";import"./VSlideGroupItem-01cf7141.js";const Be={class:"d-flex flex-wrap gap-4 mx-5 my-5"},Ie={class:"d-flex align-center"},Se={class:"d-flex gap-4 flex-wrap align-center"},ze=te({__name:"AnalyticsInvoices",async setup(ae){let u,g;o(!0),o(0),o("");const v=o();o();const $=o(),C=o(),k=o(),i=o(),x=o(),f=o(),P=o(),p=o([]),d=_=>{var t,b;U.value=_.page,F.value=(t=_.sortBy[0])==null?void 0:t.key,L.value=(b=_.sortBy[0])==null?void 0:b.order,console.log(_+0)},V=o(10),U=o(1),F=o(),L=o(),j=o([{title:"Created",value:"created"},{title:"Pending",value:"pending"},{title:"Approved",value:"approved"},{title:"Submitted",value:"submitted"},{title:"Disbursed",value:"disbursed"},{title:"Denied",value:"denied"}]),H=_=>_==="approved"?{text:_,color:"success"}:{text:_,color:"inactive"},O=[{title:"Vendor",key:"vendor"},{title:"Bank",key:"bank"},{title:"Anchor",key:"anchor"},{title:"Date Requested",key:"date_requested"},{title:"Invoice Amount",key:"amount"},{title:"Expiry Date",key:"expiry_date"},{title:"Invoice Due Date",key:"due_date"},{title:"Discount Amount ",key:"discount_amount"},{title:"Status",key:"status"}],{data:E,execute:N}=([u,g]=q(()=>T(R("/admin/invoices",{query:{vendor:$,anchor:C,bank:k,status:v,invoice_amount:i,expiry_date:x,due_date:f,date_requested:P,page:U,itemsPerPage:V,sortBy:F,orderBy:L}}))),u=await u,g(),u),M=X(()=>E.value.data),Y=X(()=>E.value.total);N();const B=()=>{const _=D.utils.json_to_sheet(M.value),t=D.utils.book_new();D.utils.book_append_sheet(t,_,"Invoice Requests");const b=D.write(t,{bookType:"xlsx",type:"array"});ue.saveAs(new Blob([b],{type:"application/octet-stream"}),"invoice-requests.xlsx")};return(_,t)=>{const b=ie,c=re,m=ne;return h(),A(K,null,{default:a(()=>[y("div",Be,[y("div",Ie,[e(b,{modelValue:l($),"onUpdate:modelValue":t[0]||(t[0]=s=>r($)?$.value=s:null),class:"me-3","clear-icon":"tabler-circle-x",clearable:"",color:"primary",placeholder:"Vendor",style:{"inline-size":"200px"},type:"text"},null,8,["modelValue"]),e(b,{modelValue:l(k),"onUpdate:modelValue":t[1]||(t[1]=s=>r(k)?k.value=s:null),class:"me-3","clear-icon":"tabler-circle-x",clearable:"",color:"primary",placeholder:"Bank",style:{"inline-size":"200px"},type:"text"},null,8,["modelValue"]),e(b,{modelValue:l(C),"onUpdate:modelValue":t[2]||(t[2]=s=>r(C)?C.value=s:null),class:"me-3","clear-icon":"tabler-circle-x",clearable:"",color:"primary",placeholder:"Anchor",style:{"inline-size":"200px"},type:"text"},null,8,["modelValue"]),e(c,{modelValue:l(P),"onUpdate:modelValue":t[3]||(t[3]=s=>r(P)?P.value=s:null),class:"me-3","clear-icon":"tabler-x",clearable:"",placeholder:"Date Created",style:{"inline-size":"200px"}},null,8,["modelValue"]),e(b,{modelValue:l(i),"onUpdate:modelValue":t[4]||(t[4]=s=>r(i)?i.value=s:null),class:"me-3","clear-icon":"tabler-circle-x",clearable:"",color:"primary",placeholder:"Invoice Amount",style:{"inline-size":"200px"},type:"text"},null,8,["modelValue"]),e(c,{modelValue:l(x),"onUpdate:modelValue":t[5]||(t[5]=s=>r(x)?x.value=s:null),class:"me-3","clear-icon":"tabler-x",clearable:"",placeholder:"Expiry Date",style:{"inline-size":"200px"}},null,8,["modelValue"]),e(c,{modelValue:l(f),"onUpdate:modelValue":t[6]||(t[6]=s=>r(f)?f.value=s:null),class:"me-3","clear-icon":"tabler-x",clearable:"",placeholder:"Due Date",style:{"inline-size":"200px"}},null,8,["modelValue"]),e(m,{modelValue:l(v),"onUpdate:modelValue":t[7]||(t[7]=s=>r(v)?v.value=s:null),items:l(j),class:"me-3","clear-icon":"tabler-x",clearable:"",placeholder:"Status",style:{"inline-size":"200px"}},null,8,["modelValue","items"])]),y("div",Se,[e(m,{modelValue:l(V),"onUpdate:modelValue":t[8]||(t[8]=s=>r(V)?V.value=s:null),items:[5,10,20,25,50]},null,8,["modelValue"]),e(le,{color:"primary","prepend-icon":"tabler-download",style:{"text-size-adjust":"auto","text-transform":"none"},onClick:t[9]||(t[9]=s=>B())})])]),e(w,null,{default:a(()=>[e(l(ge),{"items-per-page":l(V),"onUpdate:itemsPerPage":t[10]||(t[10]=s=>r(V)?V.value=s:null),page:l(U),"onUpdate:page":t[11]||(t[11]=s=>r(U)?U.value=s:null),modelValue:l(p),"onUpdate:modelValue":t[12]||(t[12]=s=>r(p)?p.value=s:null),headers:O,items:l(M),"items-length":l(Y),"item-key":"id",class:"text-wrap","show-select":"","onUpdate:options":d},{"item.status":a(({item:s})=>[e(xe,ce({density:"default",label:""},H(s.status),{class:"text-capitalize"}),null,16)]),_:1},8,["items-per-page","page","modelValue","items","items-length"])]),_:1})]),_:1})}}}),Te={class:"d-flex flex-wrap gap-4 mx-5 my-5"},Re={class:"d-flex align-center"},qe={class:"d-flex gap-4 flex-wrap align-center"},Fe={class:"text-h6"},Le=["onClick"],je=te({__name:"AnalyticsPrograms",async setup(ae){let u,g;const v=o(""),$=o(),C=o(),k=o(),i=o([]),x=o(),f=o(10),P=o(1),p=o(),d=o(),V=o(),U=o(),F=o([{title:"Pending",value:"pending"},{title:"Suspended",value:"suspended"}]),L=o([{title:"Approve",value:"active"},{title:"Reject",value:"inactive"}]),j=c=>c&&c==="active"?{color:"success",icon:"tabler-thumb-up"}:{color:"error",icon:"tabler-thumb-down"},H=(c,m)=>c/m*100,O=[{title:"Anchor",key:"name"},{title:"Name",key:"code"},{title:"Bank",key:"bank"},{title:"Approval Date",key:"approved_date"},{title:"Program Limit",key:"program_limit"},{title:"Max Limit Per Account",key:"max_limit_per_account"},{title:"Min Financing Days",key:"min_financing_days"},{title:"Max Financing Days",key:"max_financing_days"},{title:"Program Type",key:"program_type"},{title:"Actions",key:"actions",sortable:!1}],{data:E,execute:N}=([u,g]=q(()=>T(R("/all/UI/program/approved",{query:{q:v,status:k,plan:C,role:$,itemsPerPage:f,page:P,sortBy:p,orderBy:d,fromdate:V,todate:U}}))),u=await u,g(),u),{data:M,execute:Y}=([u,g]=q(()=>T(R("/programs/changes"))),u=await u,g(),u),B=X(()=>E.value.data);console.log(B),N(),Y();const _=M.value.programchange,t=async c=>{await Ve("/programs/admin/activate",{method:"POST",body:{ids:c,status:x.value}}),await N()};de(x,c=>{c&&i.value.length&&t(i.value)});const b=()=>{const c=D.utils.json_to_sheet(B.value),m=D.utils.book_new();D.utils.book_append_sheet(m,c,"Pending Programs");const s=D.write(m,{bookType:"xlsx",type:"array"});ue.saveAs(new Blob([s],{type:"application/octet-stream"}),"pending-programs.xlsx")};return(c,m)=>{const s=ie,me=re,Q=ne,G=pe("IconBtn");return h(),A(ee,{class:"mb-6"},{default:a(()=>[y("div",Te,[y("div",Re,[e(s,{modelValue:l(v),"onUpdate:modelValue":m[0]||(m[0]=n=>r(v)?v.value=n:null),class:"me-3","clear-icon":"tabler-circle-x",clearable:"",color:"primary",placeholder:"Program Name",style:{"inline-size":"200px"},type:"text"},null,8,["modelValue"]),e(me,{modelValue:l(V),"onUpdate:modelValue":m[1]||(m[1]=n=>r(V)?V.value=n:null),class:"me-3","clear-icon":"tabler-x",clearable:"",placeholder:"Select Date",style:{"inline-size":"200px"}},null,8,["modelValue"]),e(Q,{modelValue:l(k),"onUpdate:modelValue":m[2]||(m[2]=n=>r(k)?k.value=n:null),items:l(F),class:"me-3","clear-icon":"tabler-x",clearable:"",placeholder:"Status",style:{"inline-size":"200px"}},null,8,["modelValue","items"]),e(Q,{modelValue:l(x),"onUpdate:modelValue":m[3]||(m[3]=n=>r(x)?x.value=n:null),items:l(L),"item-title":"title","item-value":"value",class:"me-1","clear-icon":"tabler-x",clearable:"",chips:"",placeholder:"Bulk Actions",style:{"inline-size":"200px"}},null,8,["modelValue","items"])]),y("div",qe,[e(Q,{modelValue:l(f),"onUpdate:modelValue":m[4]||(m[4]=n=>r(f)?f.value=n:null),items:[5,10,20,25,50]},null,8,["modelValue"]),e(le,{color:"primary","prepend-icon":"tabler-download",style:{"text-size-adjust":"auto","text-transform":"none"},onClick:m[5]||(m[5]=n=>b())})])]),l(_)>0?(h(),A(Z,{key:0},{default:a(()=>[J(" Current pending changes "),e(be,{color:"error",size:"x-small"},{default:a(()=>[y("small",null,z(l(_)),1)]),_:1})]),_:1})):S("",!0),e(l(ke),{modelValue:l(i),"onUpdate:modelValue":m[6]||(m[6]=n=>r(i)?i.value=n:null),headers:O,items:l(B),"items-per-page":l(f),class:"text-wrap","show-select":""},{"item.name":a(({item:n})=>[y("h6",Fe,[y("a",{href:"javascript:void(0)",onClick:I=>c.$router.push(`/program/view/${n.id}`)},z(n.name),9,Le)]),H(n.program_limit,n.max_limit_per_account)<10?(h(),A(W,{key:0,icon:"tabler-alert-circle",title:"Program Limit is almost depleted",color:"error"})):S("",!0)]),"item.program_limit":a(({item:n})=>[y("p",null,z(n.program_limit.toLocaleString()),1)]),"item.max_limit_per_account":a(({item:n})=>[y("p",null,z(n.max_limit_per_account.toLocaleString()),1)]),"item.actions":a(({item:n})=>[c.$can("manage","Program Changes Checker")?(h(),A(G,{key:0,onClick:I=>c.$router.push(`/program/view/${n.id}`)},{default:a(()=>[e(W,{icon:"tabler-eye",color:"info"})]),_:2},1032,["onClick"])):S("",!0),c.$can("manage","Program Changes Checker")?(h(),A(G,{key:1,onClick:I=>c.$router.push(`/program/view/edit-program/${n.id}`)},{default:a(()=>[e(W,{icon:"tabler-pencil",color:"warning"})]),_:2},1032,["onClick"])):S("",!0),c.$can("manage","Program Changes Checker")?(h(),A(G,{key:2},{default:a(()=>{var I,oe;return[e(W,{icon:(I=j(n.account_status))==null?void 0:I.icon,color:(oe=j(n.account_status))==null?void 0:oe.color,title:n.account_status,onClick:We=>t([n.id])},null,8,["icon","color","title","onClick"])]}),_:2},1024)):S("",!0)]),_:1},8,["modelValue","items","items-per-page"])]),_:1})}}}),Ee=y("h3",{class:"text-h"},"Welcome to Yofinvoice",-1),Ne=y("p",null,"You can handle tasks through the CRM",-1),Me={href:"https://yofinvoice.deveint.live/crm/",target:"_blank"},Nt=te({__name:"index",async setup(ae){let u,g;const v=o("Invoice Requests"),$=["Invoice Requests","Program Approval"],{data:C,execute:k}=([u,g]=q(()=>T(R("/admin/dashboard/statistics"))),u=await u,g(),u),i=C.value,{data:x,execute:f}=([u,g]=q(()=>T(R("/get/UI/dashboard/lead/opportunity"))),u=await u,g(),u);return X(()=>x.value.data),f(),ve(()=>f()),(P,p)=>(h(),A(K,{class:"match-height"},{default:a(()=>[e(w,{cols:"12",md:"8"},{default:a(()=>[e(we,{stats:l(i),"onUpdate:stats":p[0]||(p[0]=d=>r(i)?i.value=d:null)},null,8,["stats"])]),_:1}),e(w,{cols:"12",md:"4"},{default:a(()=>[e(ee,null,{default:a(()=>[e(Z,null,{default:a(()=>[Ee,Ne,y("a",Me,[e(le,{class:"me-3"},{default:a(()=>[J(" Switch to CRM ")]),_:1})])]),_:1})]),_:1})]),_:1}),e(w,{cols:"12",lg:"4"},{default:a(()=>[e(K,null,{default:a(()=>[e(w,{cols:"12",lg:"6",md:"3",sm:"6"},{default:a(()=>[e(he,{stats:l(i),"onUpdate:stats":p[1]||(p[1]=d=>r(i)?i.value=d:null)},null,8,["stats"])]),_:1}),e(w,{cols:"12",lg:"6",md:"3",sm:"6"},{default:a(()=>[e($e,{stats:l(i),"onUpdate:stats":p[2]||(p[2]=d=>r(i)?i.value=d:null)},null,8,["stats"])]),_:1}),e(w,{cols:"12",md:"6",lg:"12"},{default:a(()=>[e(Ce,{stats:l(i),"onUpdate:stats":p[3]||(p[3]=d=>r(i)?i.value=d:null)},null,8,["stats"])]),_:1})]),_:1})]),_:1}),e(w,{cols:"12",lg:"8",md:"8"},{default:a(()=>[e(Ae)]),_:1}),e(w,{cols:"12",md:"12"},{default:a(()=>[e(ee,null,{default:a(()=>[e(De,{modelValue:l(v),"onUpdate:modelValue":p[4]||(p[4]=d=>r(v)?v.value=d:null)},{default:a(()=>[(h(),_e(fe,null,ye($,d=>e(Pe,{key:d,value:d},{default:a(()=>[J(z(d),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"]),e(Z,null,{default:a(()=>[e(Ue,{modelValue:l(v),"onUpdate:modelValue":p[5]||(p[5]=d=>r(v)?v.value=d:null)},{default:a(()=>[e(se,{value:"Invoice Requests"},{default:a(()=>[e(ze)]),_:1}),e(se,{value:"Program Approval"},{default:a(()=>[e(je)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}))}});export{Nt as default};
