import{r as O}from"./validators-db74a876.js";import{d as z,r as c,l as H,b6 as x,R as n,I as J,o as i,h as u,f as t,b as o,x as h,A as y,p as U,a$ as Q,c as g,F as f,j as X,a4 as D,e as C,aM as Y}from"./index-75b434bc.js";import{_ as Z}from"./AppSelect.vue_vue_type_script_setup_true_lang-32a0f469.js";import{_ as ee}from"./AppTextField.vue_vue_type_script_setup_true_lang-93dc1e26.js";import{_ as ae}from"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-035125fd.js";import{$ as T}from"./api-0c1dfdf3.js";import{u as te}from"./useApi-776c55ea.js";import{c as oe}from"./createUrl-149317bf.js";import{V as le,a as re,b as se}from"./VCard-95c0d706.js";import{V as ie}from"./VAlert-1953529c.js";import{V as ne}from"./VCardText-76f31582.js";import{V as me}from"./VForm-e46f5921.js";import{V as M}from"./VRow-d6f20668.js";import{V as N}from"./VCol-35b3d337.js";import{V as ue}from"./VCheckbox-e2d8e1ba.js";import{V as pe}from"./VDialog-bc06d443.js";import"./helpers-681711bc.js";import"./form-2b416184.js";import"./VSelect-54e8b29a.js";import"./VTextField-05e93cc8.js";/* empty css                   */import"./VCounter-3e4b236e.js";import"./transition-6afda34e.js";import"./VField-82993695.js";import"./easing-9f15041e.js";import"./VInput-b46333d7.js";import"./forwardRefs-8348545e.js";import"./index-97808f23.js";import"./VList-c7d4c8b4.js";import"./ssrBoot-7f224ca6.js";import"./createSimpleFunctional-4b3a0a39.js";import"./VAvatar-071125b9.js";import"./VImg-ba4b392a.js";import"./VDivider-fc890531.js";import"./dialog-transition-14fdab67.js";import"./VMenu-3f143933.js";import"./VOverlay-0b79a00d.js";import"./lazy-0bb5e457.js";import"./scopeId-ee2feb8e.js";import"./VCheckboxBtn-0f22f589.js";import"./VSelectionControl-e1264669.js";import"./VChip-e2ddd660.js";import"./index-2898f57d.js";/* empty css              */const de=C("p",{class:"mb-0"}," Confirm Details before Conversion ",-1),ce=C("h6",{class:"text-h6 font-weight-medium"}," Account Details ",-1),ye=C("p",{class:"mb-0"}," Enter your Account Details ",-1),ra=z({__name:"LeadConversion",props:{pipeline:{},isDialogVisible:{type:Boolean}},emits:["update:isDialogVisible"],async setup(L,{emit:A}){let m,b;const d=L,_=A,w=c(!1),B=H(),E=["Baringo","Bomet","Bungoma","Busia","Elgeyo Marakwet","Embu","Garissa","Homa Bay","Isiolo","Kajiado","Kakamega","Kericho","Kiambu","Kilifi","Kirinyaga","Kisii","Kisumu","Kitui","Kwale","Laikipia","Lamu","Machakos","Makueni","Mandera","Marsabit","Meru","Migori","Mombasa","Murang'a","Nairobi","Nakuru","Nandi","Narok","Nyamira","Nyandarua","Nyeri","Samburu","Siaya","Taita Taveta","Tana River","Tharaka-Nithi","Trans Nzoia","Turkana","Uasin Gishu","Vihiga","Wajir","West Pokot"],V=c(!1),F=c({message:void 0,statusCode:void 0}),I=([m,b]=x(()=>T(`/get/UI/specific/pipeline/${d.pipeline}`,{method:"GET"})),m=await m,b(),m),a=c(I),K=()=>{_("update:isDialogVisible",!1)},P=()=>{_("update:isDialogVisible",!1)},R=l=>{_("update:isDialogVisible",l)},p=n({get(){return V.value?a.value.phone_number:a.value.whatsapp_number},set(l){V.value?a.value.phone_number=l:a.value.whatsapp_number=l}}),{data:$,execute:G}=([m,b]=x(()=>te(oe("/get/UI/associated/contacts",{query:{pipeline_id:d.pipeline}}))),m=await m,b(),m),W=n(()=>$.value),j=c([{key:"leadType",type:"text",model:"lead_type",label:"Lead Type",placeholder:"Lead Type",condition:!0,readonly:!0},{key:"name",type:"text",model:"name",label:n(()=>a.value.lead_type==="corporate"?"Corporate Name":"Individual First Name"),placeholder:"Enter Name",condition:!0},{key:"name",type:"text",model:"firstName",label:n(()=>a.value.lead_type==="corporate"?"Contact First Name":"Individual Last Name"),placeholder:"Enter Name"},{key:"name",type:"text",model:"lastName",label:n(()=>a.value.lead_type==="corporate"?"Contact Last Name":"Individual Last Name"),placeholder:"Enter Name",condition:n(()=>a.value.lead_type==="corporate")},{key:"contact",type:"select_contact",model:"contact_send_email_id",label:"Contact Person",placeholder:"Select Contact Person",items:W.value,condition:n(()=>a.value.lead_type==="corporate")},{key:"name",type:"text",model:"websiteUrl",label:"Website URL",placeholder:"Website URL",condition:n(()=>a.value.lead_type==="corporate")},{key:"phoneNumber",type:"text",model:"phone_number",label:"Phone Number",placeholder:"0700000000",condition:!0},{key:p,type:"text",model:p,label:"WhatsApp Number",placeholder:"0700000000",condition:!0},{key:"gender",type:"select",model:"gender",label:"Gender",placeholder:"Select Gender",items:["Male","Female","Other"],condition:n(()=>a.value.lead_type==="individual")},{key:"status",type:"select",model:"status",label:"Status",placeholder:"Select Status",items:["hot","cold","warm"],condition:!0},{key:"priority",type:"select",model:"priority",label:"Priority",placeholder:"Select Status",items:["high","medium","low"],condition:!0},{key:"product",type:"select",model:"product",label:"Product Type",placeholder:"Select Product Type",items:["vendor financing","dealer financing","factoring"],condition:!0},{key:"source",type:"select",model:"source",label:"Source",placeholder:"Select Source",items:["Email","Marketing","Outdoor","LinkedIn","Messages","Google","Adverts"],condition:!0},{key:"region",type:"select",model:"region",label:"Region",placeholder:"Select Region",items:E,condition:!0}]);J(async()=>{await G()});const q=async()=>{try{const l=await T(`/update/UI/pipeline/lead/data/${d.pipeline}`,{method:"POST",body:a.value,onResponseError({response:v}){F.value=v._data.errors}});w.value=!0,console.log(l);const{message:s}=l;console.log(s),await Y(()=>{B.push("/pipeline/leads/Leads")})}catch(l){console.error(l)}};return(l,s)=>{const v=ae,k=ee,S=Z;return i(),u(pe,{modelValue:d.isDialogVisible,"onUpdate:modelValue":s[3]||(s[3]=e=>d.isDialogVisible=e),modelModifiers:{lazy:!0},width:l.$vuetify.display.smAndDown?"auto":677},{default:t(()=>[o(v,{onClick:s[0]||(s[0]=e=>R(!1))}),o(le,{class:"pa-sm-8 pa-5"},{default:t(()=>[o(re,{class:"text-center"},{default:t(()=>[o(se,{class:"text-h3 mb-3"},{default:t(()=>[h(" Contact Details ")]),_:1}),de,w.value?(i(),u(ie,{key:0,color:"success"},{default:t(()=>[h(" Data Send Successfully ")]),_:1})):y("",!0)]),_:1}),o(ne,null,{default:t(()=>[o(U(me),{class:"mt-6",onSubmit:Q(K,["prevent"])},{default:t(()=>[o(M,null,{default:t(()=>[o(N,{cols:"12"},{default:t(()=>[ce,ye]),_:1}),(i(!0),g(f,null,X(j.value,e=>(i(),g(f,{key:e.key},[e.condition?(i(),u(N,{key:0,cols:"12",md:"6"},{default:t(()=>[e.type==="text"&&e.key!==p.value?(i(),u(k,{key:0,modelValue:a.value[e.model],"onUpdate:modelValue":r=>a.value[e.model]=r,label:e.label,placeholder:e.placeholder,readonly:e.readonly,rules:e.rules},null,8,["modelValue","onUpdate:modelValue","label","placeholder","readonly","rules"])):y("",!0),e.type==="text"&&e.key===p.value?(i(),g(f,{key:1},[o(k,{modelValue:p.value,"onUpdate:modelValue":s[1]||(s[1]=r=>p.value=r),label:e.label,placeholder:e.placeholder,rules:e.rules},null,8,["modelValue","label","placeholder","rules"]),o(ue,{modelValue:V.value,"onUpdate:modelValue":s[2]||(s[2]=r=>V.value=r),label:"Same as Phone Number"},null,8,["modelValue"])],64)):y("",!0),e.type==="email"?(i(),u(k,{key:2,modelValue:a.value[e.model],"onUpdate:modelValue":r=>a.value[e.model]=r,label:e.label,placeholder:e.placeholder,rules:e.rules},null,8,["modelValue","onUpdate:modelValue","label","placeholder","rules"])):e.type==="select"?(i(),u(S,{key:3,modelValue:a.value[e.model],"onUpdate:modelValue":r=>a.value[e.model]=r,items:e.items,label:e.label,placeholder:e.placeholder,rules:e.rules},null,8,["modelValue","onUpdate:modelValue","items","label","placeholder","rules"])):e.type==="select_contact"?(i(),u(S,{key:4,modelValue:a.value[e.model],"onUpdate:modelValue":r=>a.value[e.model]=r,items:e.items,label:e.label,rules:["requiredValidator"in l?l.requiredValidator:U(O)],"item-title":"name","item-value":"id"},null,8,["modelValue","onUpdate:modelValue","items","label","rules"])):y("",!0)]),_:2},1024)):y("",!0)],64))),128))]),_:1}),o(M,null,{default:t(()=>[o(N,{class:"d-flex flex-wrap justify-center gap-4",cols:"12"},{default:t(()=>[o(D,{type:"submit",onClick:q},{default:t(()=>[h(" Convert ")]),_:1}),o(D,{color:"secondary",variant:"tonal",onClick:P},{default:t(()=>[h(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","width"])}}});export{ra as default};
