import{r as U}from"./validators-db74a876.js";import{_ as O}from"./AppTextField.vue_vue_type_script_setup_true_lang-93dc1e26.js";import{_ as P}from"./AppStepper.vue_vue_type_style_index_0_lang-c08c6f80.js";import{_ as G}from"./AllRoles.vue_vue_type_script_setup_true_lang-675144e5.js";import{d as H,l as J,k as K,b6 as D,r as u,R as L,w as h,I as Q,o as x,c as X,b as o,f as t,x as g,z as Y,p as v,e as k,a4 as Z,h as ee,A as ae,F as oe,aM as te}from"./index-75b434bc.js";import{u as S}from"./useApi-776c55ea.js";import{$ as le}from"./api-0c1dfdf3.js";import{c as se}from"./createUrl-149317bf.js";import{V as re}from"./VSnackbar-f21966b4.js";import{V as ue}from"./VCard-95c0d706.js";import{V as C}from"./VRow-d6f20668.js";import{V as p}from"./VCol-35b3d337.js";import{V as T}from"./VCardText-76f31582.js";import{V as $}from"./VForm-e46f5921.js";import{V as ie,a as q}from"./VWindowItem-04415d19.js";import{V as ne}from"./VDivider-fc890531.js";import"./helpers-681711bc.js";import"./form-2b416184.js";import"./VTextField-05e93cc8.js";/* empty css                   */import"./VCounter-3e4b236e.js";import"./transition-6afda34e.js";import"./VField-82993695.js";import"./easing-9f15041e.js";import"./VInput-b46333d7.js";import"./forwardRefs-8348545e.js";import"./index-97808f23.js";import"./VSlideGroup-3e745b05.js";import"./VSlideGroupItem-95742265.js";import"./VCheckbox-e2d8e1ba.js";import"./VCheckboxBtn-0f22f589.js";import"./VSelectionControl-e1264669.js";import"./index-2898f57d.js";import"./VOverlay-0b79a00d.js";import"./lazy-0bb5e457.js";import"./scopeId-ee2feb8e.js";import"./createSimpleFunctional-4b3a0a39.js";import"./VAvatar-071125b9.js";import"./VImg-ba4b392a.js";/* empty css              */import"./ssrBoot-7f224ca6.js";const me=k("h6",{class:"text-h6 font-weight-medium"}," Role Information ",-1),pe=k("p",{class:"mb-0"}," Setup Information ",-1),de={class:"d-flex flex-wrap gap-4 justify-sm-space-between justify-center mt-8"},aa=H({__name:"[id]",async setup(ce){let r,n;const B=J(),I=K(),{data:d}=([r,n]=D(()=>S(`/UI/roles/permissions/${I.params.id}`)),r=await r,n(),r),i=u([]),V=u(d.value.permissions[0].RoleName),_=u(d.value.permissions[0].RoleTypeName),E=u([]),R=u(d.value.permissions[0].RoleDescription),m=u([]),N=u([]);N.value=d.value.permissions;const F=[{title:"Role Details",subtitle:"Setup Role Details"},{title:"Draft",subtitle:"Available Drafts"}],c=u(0),b=u(!1),j=async()=>{try{const a=await le(`/UI/roles/${I.params.id}/rolename/update`,{method:"POST",body:{RoleName:V.value,RoleTypeName:_.value,RoleDescription:R.value,RoleIDs:w.value},onResponseError({response:l}){console.log("Error",l)}}),{message:e}=a;console.log(e),await te(()=>{b.value=!0,B.push("/users/role")})}catch(a){console.error(a)}},z=a=>{(Array.isArray(a)?a:[a]).forEach(l=>{m.value.includes(l)?m.value=m.value.filter(f=>f!==l):m.value.push(l)})},M=a=>{a.forEach(e=>{m.value.includes(e)||m.value.push(e)})},{data:W,execute:A}=([r,n]=D(()=>S(se("/UI/roles/permissions"))),r=await r,n(),r),y=L(()=>W.value),w=u([]);return h(_,a=>{const e=y.value.find(l=>l.name===a);e?i.value=e.groups:i.value=[]}),h(i,a=>{i.value=a},{immediate:!0}),Q(async()=>{await A(),E.value=y.value.map(a=>a.name),h(_,a=>{const e=y.value.find(l=>l.name===a);e?i.value=e.groups:i.value=[]},{immediate:!0})}),[r,n]=D(()=>A()),await r,n(),(a,e)=>{const l=P,f=O;return x(),X(oe,null,[o(re,{modelValue:b.value,"onUpdate:modelValue":e[0]||(e[0]=s=>b.value=s),color:"success",location:"top end",variant:"flat"},{default:t(()=>[g(" Role updated successfully ")]),_:1},8,["modelValue"]),o(v($),null,{default:t(()=>[o(ue,null,{default:t(()=>[o(C,null,{default:t(()=>[o(p,{class:Y(a.$vuetify.display.smAndDown?"border-b":"border-e"),cols:"12",md:"4"},{default:t(()=>[o(T,null,{default:t(()=>[o(l,{"current-step":c.value,"onUpdate:currentStep":e[1]||(e[1]=s=>c.value=s),items:F,direction:"vertical"},null,8,["current-step"])]),_:1})]),_:1},8,["class"]),o(p,{cols:"12",md:"8"},{default:t(()=>[o(T,null,{default:t(()=>[o(v($),null,{default:t(()=>[o(ie,{modelValue:c.value,"onUpdate:modelValue":e[5]||(e[5]=s=>c.value=s),class:"disable-tab-transition"},{default:t(()=>[o(q,null,{default:t(()=>[o(C,null,{default:t(()=>[o(p,{cols:"12"},{default:t(()=>[me,pe]),_:1}),o(p,{cols:"12",md:"6"},{default:t(()=>[o(f,{modelValue:V.value,"onUpdate:modelValue":e[2]||(e[2]=s=>V.value=s),rules:["requiredValidator"in a?a.requiredValidator:v(U)],label:"Role Name",placeholder:"Role",disabled:""},null,8,["modelValue","rules"])]),_:1}),o(p,{cols:"12",md:"6"},{default:t(()=>[o(f,{modelValue:R.value,"onUpdate:modelValue":e[3]||(e[3]=s=>R.value=s),rules:["requiredValidator"in a?a.requiredValidator:v(U)],label:"Role Description",placeholder:"Role Description"},null,8,["modelValue","rules"])]),_:1})]),_:1}),k("div",de,[o(Z,{"append-icon":"tabler-check",color:"success",onClick:j},{default:t(()=>[g(" Update ")]),_:1})]),o(ne,{class:"my-4"}),i.value&&i.value.length>0?(x(),ee(G,{key:0,currentdata:N.value,group:i.value,onCheckboxChanged:z,selectedIds:w.value,"onUpdate:selectedIds":[e[4]||(e[4]=s=>w.value=s),M]},null,8,["currentdata","group","selectedIds"])):ae("",!0)]),_:1}),o(q,null,{default:t(()=>[o(C,null,{default:t(()=>[g(" No Drafts ")]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}}});export{aa as default};
