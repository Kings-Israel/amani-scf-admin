import{r as b,e as S}from"./validators-db74a876.js";import{d as B,r as m,k as D,l as M,o as F,h as N,f as s,b as a,e as i,p as e,J as y,x as p,y as P,a$ as $,aI as j,a4 as A,a as U,b4 as g,aM as E}from"./index-5caaa453.js";import{_ as J}from"./AppTextField.vue_vue_type_script_setup_true_lang-298ad98d.js";import{u as v}from"./useGenerateImageVariant-65226aac.js";import{a as O,b as z,c as G,d as W}from"./auth-v2-login-illustration-light-7e097de0.js";import{a as H,b as K}from"./misc-mask-light-1aeffaee.js";import{V as Q}from"./VNodeRenderer-f316f6d8.js";import{u as X}from"./useAbility-d1794150.js";import{$ as Y}from"./api-44dd0fa9.js";import{V as w}from"./VImg-6009f8f0.js";import{V as c}from"./VCol-bcc5388c.js";import{V as Z}from"./VCard-1a5b2c5e.js";import{V as k}from"./VCardText-3b4da816.js";import{V as ee}from"./VForm-ed4803d2.js";import{V as x}from"./VRow-e44df108.js";import{V as ae}from"./VCheckbox-4131d654.js";import"./helpers-681711bc.js";import"./form-c9c578a3.js";import"./VTextField-604d91ff.js";/* empty css                   */import"./VCounter-728f7f8c.js";import"./transition-1886cce0.js";import"./VField-6b3808ed.js";import"./easing-9f15041e.js";import"./VInput-e87890b4.js";import"./forwardRefs-8348545e.js";import"./index-7dd1f5f0.js";import"./index-2898f57d.js";/* empty css              */import"./createSimpleFunctional-9624028d.js";import"./VAvatar-3ee4c690.js";import"./VCheckboxBtn-1d552264.js";import"./VSelectionControl-e0df1dbd.js";const oe={class:"position-relative bg-background rounded-lg w-100 ma-8 me-0"},te={class:"d-flex align-center justify-center w-100 h-100"},se={class:"text-h4 mb-1"},re={class:"text-capitalize"},le=i("p",{class:"mb-0"}," Please sign-in to your account and start the adventure ",-1),ie={class:"d-flex align-center flex-wrap justify-space-between mt-1 mb-4"},Ee=B({__name:"login",setup(ne){const I=v(W,G,z,O,!0),C=v(K,H),u=m(!1),h=D(),L=M(),R=X(),f=m({email:void 0,password:void 0}),_=m(),l=m({email:"",password:""}),V=m(!1),T=async()=>{try{const o=await Y("/auth/UI/login",{method:"POST",body:{email:l.value.email,password:l.value.password},onResponseError({response:r}){f.value=r._data.errors}}),{accessToken:t,userData:d,permissions:n}=o;g("yofAbilities").value=n,localStorage.setItem("permissions",JSON.stringify(n)),R.update(n),g("userData").value=d,g("adminAccessToken").value=t,await E(()=>{L.replace(h.query.to?String(h.query.to):"/")})}catch(o){console.error(o)}},q=()=>{var o;(o=_.value)==null||o.validate().then(({valid:t})=>{t&&T()})};return(o,t)=>{const d=J,n=U("RouterLink");return F(),N(x,{class:"auth-wrapper bg-surface","no-gutters":""},{default:s(()=>[a(c,{class:"d-none d-lg-flex",lg:"8"},{default:s(()=>[i("div",oe,[i("div",te,[a(w,{src:e(I),class:"auth-illustration mt-16 mb-2","max-width":"505"},null,8,["src"])]),a(w,{src:e(C),class:"auth-footer-mask"},null,8,["src"])])]),_:1}),a(c,{class:"auth-card-v2 d-flex align-center justify-center",cols:"12",lg:"4"},{default:s(()=>[a(Z,{"max-width":500,class:"mt-12 mt-sm-0 pa-4",flat:""},{default:s(()=>[a(k,null,{default:s(()=>[a(e(Q),{nodes:e(y).app.logo,class:"mb-6"},null,8,["nodes"]),i("h4",se,[p(" Welcome to "),i("span",re,P(e(y).app.title),1),p("!  ")]),le]),_:1}),a(k,null,{default:s(()=>[a(e(ee),{ref_key:"refVForm",ref:_,onSubmit:$(q,["prevent"])},{default:s(()=>[a(x,null,{default:s(()=>[a(c,{cols:"12"},{default:s(()=>[a(d,{modelValue:e(l).email,"onUpdate:modelValue":t[0]||(t[0]=r=>e(l).email=r),"error-messages":e(f).email,rules:["requiredValidator"in o?o.requiredValidator:e(b),"emailValidator"in o?o.emailValidator:e(S)],autofocus:"",label:"Email",placeholder:"johndoe@email.com",type:"email"},null,8,["modelValue","error-messages","rules"])]),_:1}),a(c,{cols:"12"},{default:s(()=>[a(d,{modelValue:e(l).password,"onUpdate:modelValue":t[1]||(t[1]=r=>e(l).password=r),"append-inner-icon":e(u)?"tabler-eye-off":"tabler-eye","error-messages":e(f).password,rules:["requiredValidator"in o?o.requiredValidator:e(b)],type:e(u)?"text":"password",label:"Password",placeholder:"路路路路路路路路路路路路","onClick:appendInner":t[2]||(t[2]=r=>u.value=!e(u))},null,8,["modelValue","append-inner-icon","error-messages","rules","type"]),i("div",ie,[a(ae,{modelValue:e(V),"onUpdate:modelValue":t[3]||(t[3]=r=>j(V)?V.value=r:null),label:"Remember me"},null,8,["modelValue"]),a(n,{to:{name:"forgot-password"},class:"text-primary ms-2 mb-1"},{default:s(()=>[p(" Forgot Password? ")]),_:1})]),a(A,{block:"",type:"submit"},{default:s(()=>[p(" Login ")]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})}}});export{Ee as default};
