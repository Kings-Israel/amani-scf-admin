import{_ as Z}from"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-9e7a34d5.js";import{_ as ee}from"./AppSelect.vue_vue_type_script_setup_true_lang-67ce80f3.js";import{_ as te}from"./AppTextField.vue_vue_type_script_setup_true_lang-298ad98d.js";import{_ as oe}from"./edit-email-template.vue_vue_type_script_setup_true_lang-ff53c288.js";import{p as le}from"./paginationMeta-4ad053a4.js";import{u as ae}from"./useApi-c9327355.js";import{c as ie}from"./createUrl-3e678c2b.js";import{$ as B}from"./api-44dd0fa9.js";import{d as re,r as i,b6 as ne,R as U,o as F,c as se,b as o,f as r,e as s,p as l,aI as p,a4 as b,x as f,y as D,t as I,a9 as $,h as me,A as pe,F as ce,a as ue}from"./index-5caaa453.js";import{V as de}from"./VDataTable-1493872b.js";import{V as S}from"./VChip-49676f7d.js";import{V as fe}from"./VDivider-d40713ce.js";import{V as ve}from"./VPagination-4169e3c5.js";import{V as j}from"./VCard-1a5b2c5e.js";import{V as N}from"./VCardText-3b4da816.js";import{V as ge}from"./VDialog-808ce03e.js";import"./form-c9c578a3.js";import"./VSelect-f0a443ce.js";import"./VTextField-604d91ff.js";/* empty css                   */import"./VCounter-728f7f8c.js";import"./transition-1886cce0.js";import"./VField-6b3808ed.js";import"./easing-9f15041e.js";import"./VInput-e87890b4.js";import"./forwardRefs-8348545e.js";import"./index-7dd1f5f0.js";import"./VList-4b1bf96e.js";import"./ssrBoot-2696bccc.js";import"./createSimpleFunctional-9624028d.js";import"./VAvatar-3ee4c690.js";import"./VImg-6009f8f0.js";import"./dialog-transition-1ae6ec72.js";import"./VMenu-97c48b4e.js";import"./VOverlay-da001e16.js";import"./lazy-9cd674a5.js";import"./scopeId-484eb469.js";import"./VCheckboxBtn-1d552264.js";import"./VSelectionControl-e0df1dbd.js";import"./AppStepper.vue_vue_type_style_index_0_lang-ef456a65.js";import"./VSlideGroup-1fe3f4d3.js";import"./VSlideGroupItem-01cf7141.js";import"./email-details.vue_vue_type_script_setup_true_lang-2b5cd757.js";import"./TiptapEditor.vue_vue_type_style_index_0_lang-b24c8bd1.js";import"./index-f9c487c0.js";import"./VCol-bcc5388c.js";/* empty css              */import"./VRow-e44df108.js";import"./header-footer.vue_vue_type_script_setup_true_lang-499a8c40.js";import"./VForm-ed4803d2.js";import"./VWindowItem-1e406499.js";import"./index-2898f57d.js";import"./VTable-f9bab7db.js";import"./filter-aecd5fc1.js";const Ve={class:"d-flex flex-wrap gap-4 mx-5 my-5"},ye={class:"d-flex align-center"},_e={class:"d-flex gap-4 flex-wrap align-center"},be={class:"text-h6"},xe={href:"javascript:void(0)"},ke={class:"d-flex align-center justify-space-between flex-wrap gap-3 pa-5 pt-3"},Ce={class:"text-sm text-medium-emphasis mb-0"},we=s("br",null,null,-1),ht=re({__name:"email-templates",async setup(De){let v,h;const g=i("");i();const u=i(null),V=i(),y=i(),z=i(),m=i(!1),c=i(!1),n=i(10),d=i(1),E=i(),M=i();i(),i();const R=i([{title:"Active",value:"active"},{title:"In active",value:"inactive"}]),q=i([{title:"Dealer Financing",value:"dealer_financing"},{title:"Vendor Financing",value:"vendor_financing"},{title:"Factoring",value:"factoring"}]),O=a=>{u.value=a,c.value=!0},Q=a=>{u.value=a,m.value=!0},T=a=>a&&a==="active"?{color:"success",icon:"tabler-thumb-up"}:{color:"error",icon:"tabler-thumb-down"},G=a=>a==="active"?{text:"Active",color:"success"}:{text:"Inactive",color:"error"},H=a=>a==="vendor_financing"?{text:"Vendor Financing"}:a==="dealer_financing"?{text:"Dealer Financing"}:{text:"Factoring"},J=[{title:"Template Name",key:"name"},{title:"Subject",key:"subject"},{title:"Product Type",key:"product_type"},{title:"Status",key:"status"},{title:"Actions",key:"actions",sortable:!1}],{data:P,execute:x}=([v,h]=ne(()=>ae(ie("/UI/configurations/email-templates",{query:{q:g,status:V,product:y,itemsPerPage:n,page:d,sortBy:E,orderBy:M}}))),v=await v,h(),v),K=U(()=>P.value.data),k=U(()=>P.value.total);x();const L=async a=>{try{await B(`/UI/configurations/delete/email-template/${a}`,{method:"POST",onResponseError({response:t}){errors.value=t._data.errors}}),await x(),c.value=!1}catch(t){console.error(t)}},W=async a=>{await B("/UI/configurations/activate/email-template",{method:"POST",body:{ids:a,status:z.value}}),await x()};return(a,t)=>{const X=te,C=ee,w=ue("IconBtn"),Y=Z;return F(),se(ce,null,[o(j,{class:"mb-6"},{default:r(()=>[s("div",Ve,[s("div",ye,[o(X,{modelValue:l(g),"onUpdate:modelValue":t[0]||(t[0]=e=>p(g)?g.value=e:null),class:"me-3","clear-icon":"tabler-circle-x",clearable:"",color:"primary",placeholder:"Template Name",style:{"inline-size":"200px"},type:"text"},null,8,["modelValue"]),o(C,{modelValue:l(V),"onUpdate:modelValue":t[1]||(t[1]=e=>p(V)?V.value=e:null),items:l(R),class:"me-3","clear-icon":"tabler-x",clearable:"",placeholder:"Status",style:{"inline-size":"200px"}},null,8,["modelValue","items"]),o(C,{modelValue:l(y),"onUpdate:modelValue":t[2]||(t[2]=e=>p(y)?y.value=e:null),items:l(q),class:"me-3","clear-icon":"tabler-x",clearable:"",placeholder:"Product Type",style:{"inline-size":"200px"}},null,8,["modelValue","items"])]),s("div",_e,[o(C,{modelValue:l(n),"onUpdate:modelValue":t[3]||(t[3]=e=>p(n)?n.value=e:null),items:[5,10,20,25,50]},null,8,["modelValue"]),o(b,{color:"primary","prepend-icon":"tabler-download",style:{"text-size-adjust":"auto","text-transform":"none"}}),o(b,{color:"primary","prepend-icon":"tabler-plus",style:{"text-size-adjust":"auto","text-transform":"none"},onClick:t[4]||(t[4]=e=>a.$router.push("/configurations/view/add-email-template"))},{default:r(()=>[f(" Add Template ")]),_:1})])]),o(l(de),{headers:J,items:l(K),"items-per-page":l(n),class:"text-no-wrap"},{"item.name":r(({item:e})=>[s("h6",be,[s("a",xe,D(e.name),1)])]),"item.status":r(({item:e})=>[o(S,I({density:"default",label:""},G(e.status)),null,16)]),"item.product_type":r(({item:e})=>[o(S,I({density:"default",label:""},H(e.product_type)),null,16)]),"item.actions":r(({item:e})=>[o(w,{onClick:_=>Q(e)},{default:r(()=>[o($,{icon:"tabler-pencil",color:"warning"})]),_:2},1032,["onClick"]),o(w,null,{default:r(()=>{var _,A;return[o($,{icon:(_=T(e.status))==null?void 0:_.icon,color:(A=T(e.status))==null?void 0:A.color,title:e.status,onClick:$e=>W([e.id])},null,8,["icon","color","title","onClick"])]}),_:2},1024),o(w,null,{default:r(()=>[o($,{icon:"tabler-trash",color:"error",onClick:_=>O(e)},null,8,["onClick"])]),_:2},1024)]),bottom:r(()=>[o(fe),s("div",ke,[s("p",Ce,D(l(le)({page:l(d),itemsPerPage:l(n)},l(k))),1),o(ve,{modelValue:l(d),"onUpdate:modelValue":t[5]||(t[5]=e=>p(d)?d.value=e:null),length:Math.ceil(l(k)/l(n)),"total-visible":a.$vuetify.display.xs?1:Math.min(Math.ceil(l(k)/l(n)),5),"active-color":"primary","next-icon":"tabler-caret-right","prev-icon":"tabler-caret-left"},null,8,["modelValue","length","total-visible"])])]),_:1},8,["items","items-per-page"])]),_:1}),l(m)?(F(),me(oe,{key:0,isDialogVisible:l(m),"onUpdate:isDialogVisible":t[6]||(t[6]=e=>p(m)?m.value=e:null),email:l(u)},null,8,["isDialogVisible","email"])):pe("",!0),o(ge,{modelValue:l(c),"onUpdate:modelValue":t[10]||(t[10]=e=>p(c)?c.value=e:null),persistent:"",class:"v-dialog-sm"},{default:r(()=>[o(Y,{onClick:t[7]||(t[7]=e=>m.value=!l(m))}),o(j,null,{default:r(()=>[o(N,null,{default:r(()=>[f(" Are you sure you want to delete email template: "+D(l(u).name)+"? ",1),we,f(" This action can not be undone. ")]),_:1}),o(N,{class:"d-flex justify-end gap-3 flex-wrap"},{default:r(()=>[o(b,{color:"secondary",variant:"tonal",onClick:t[8]||(t[8]=e=>c.value=!1)},{default:r(()=>[f(" Cancel ")]),_:1}),o(b,{color:"error",onClick:t[9]||(t[9]=e=>L(l(u).id))},{default:r(()=>[f(" Delete ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}});export{ht as default};
