import{p as P}from"./paginationMeta-4ad053a4.js";import{u as S}from"./useApi-776c55ea.js";import{c as U}from"./createUrl-149317bf.js";import{$ as M}from"./api-0c1dfdf3.js";import{V as N}from"./VCardText-76f31582.js";import{V as A}from"./VSpacer-6f8dff92.js";import{V as x}from"./VDivider-fc890531.js";import{V as D}from"./VDataTableServer-e9f6b4ac.js";import{V as $}from"./VChip-e2ddd660.js";import{d as T,r as s,b6 as z,R as c,o as L,c as R,b as o,f as i,e as r,p as d,y as n,K as j,x as _,a4 as q}from"./index-75b434bc.js";import{V as I}from"./VPagination-2b54b87a.js";import{V as O}from"./VCard-95c0d706.js";import"./index-2898f57d.js";import"./createSimpleFunctional-4b3a0a39.js";import"./VDataTable-c3cccdda.js";import"./VSelect-54e8b29a.js";import"./VTextField-05e93cc8.js";/* empty css                   */import"./VCounter-3e4b236e.js";import"./transition-6afda34e.js";import"./VField-82993695.js";import"./form-2b416184.js";import"./easing-9f15041e.js";import"./VInput-b46333d7.js";import"./forwardRefs-8348545e.js";import"./index-97808f23.js";import"./VList-c7d4c8b4.js";import"./ssrBoot-7f224ca6.js";import"./VAvatar-071125b9.js";import"./VImg-ba4b392a.js";import"./dialog-transition-14fdab67.js";import"./VMenu-3f143933.js";import"./VOverlay-0b79a00d.js";import"./lazy-0bb5e457.js";import"./scopeId-ee2feb8e.js";import"./VCheckboxBtn-0f22f589.js";import"./VSelectionControl-e1264669.js";import"./VTable-de2d1039.js";import"./filter-3bfef89c.js";const E=[{title:"Notification",key:"combined"},{title:"Date",key:"formatted_created_at"},{title:"Action",key:"actions"}],K={class:"d-flex flex-wrap gap-4 mx-5"},Q=r("h4",{class:"text-h4 text-high-emphasis mb-1"}," All Notifications ",-1),F={class:"d-flex justify-between w-100"},G={class:"font-weight-bold"},H={class:"d-flex align-center justify-space-between flex-wrap gap-3 pa-5 pt-3"},J={class:"text-sm text-medium-emphasis mb-0"},Lt=T({__name:"index",async setup(W){let p,f;const V=s("");s(!0),s(0);const w=s([]),m=s(50),l=s(1),v=s(),g=s(),b=e=>{var a,t;l.value=e.page,v.value=(a=e.sortBy[0])==null?void 0:a.key,g.value=(t=e.sortBy[0])==null?void 0:t.order};s([{isSeen:"true",value:"true"},{isSeen:"false",value:"false"}]);const{data:h,execute:y}=([p,f]=z(()=>S(U("/get/admin/UI/notifications/all",{query:{q:V,itemsPerPage:m,page:l,sortBy:v,orderBy:g}}))),p=await p,f(),p),k=c(()=>h.value.data),u=c(()=>h.value.total),C=e=>e.toLowerCase()==="unread"?"warning":"success";c(()=>w.value.length<1),s(!1);const B=async e=>{await M("/notifications/mark/read",{method:"POST",body:{id:e}}),await y()};return y(),(e,a)=>(L(),R("section",null,[o(O,null,{default:i(()=>[o(N,{class:"d-flex flex-wrap py-4 gap-4"},{default:i(()=>[r("div",K,[Q,o(A)])]),_:1}),o(x),o(d(D),{"items-per-page":m.value,"onUpdate:itemsPerPage":a[1]||(a[1]=t=>m.value=t),page:l.value,"onUpdate:page":a[2]||(a[2]=t=>l.value=t),headers:d(E),items:k.value,"items-length":u.value,class:"text-no-wrap","expand-on-click":"","onUpdate:options":b},{"item.combined":i(({item:t})=>[r("div",F,[r("div",G,n(t.title)+" : ",1),r("div",null,n(t.subtitle),1)])]),"item.amount":i(({item:t})=>[r("span",{style:j({color:e.$vuetify.theme.global.current.colors.success})},n(t.amount),5)]),"item.status":i(({item:t})=>[o($,{color:C(t.status),class:"text-capitalize",size:"small"},{default:i(()=>[_(n(t.status),1)]),_:2},1032,["color"])]),"item.actions":i(({item:t})=>[o(q,{onClick:X=>B(t.id),color:"primary",small:""},{default:i(()=>[_("Mark as Read")]),_:2},1032,["onClick"])]),bottom:i(()=>[o(x),r("div",H,[r("p",J,n(d(P)({page:l.value,itemsPerPage:m.value},u.value)),1),o(I,{modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=t=>l.value=t),length:Math.min(Math.ceil(u.value/m.value),5),"total-visible":e.$vuetify.display.xs?1:Math.min(Math.ceil(u.value/m.value),5)},null,8,["modelValue","length","total-visible"])])]),_:1},8,["items-per-page","page","headers","items","items-length"])]),_:1})]))}});export{Lt as default};
