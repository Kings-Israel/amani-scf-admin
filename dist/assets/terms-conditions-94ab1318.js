import{_ as ye}from"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-035125fd.js";import{_ as Ce}from"./AppSelect.vue_vue_type_script_setup_true_lang-32a0f469.js";import{_ as be}from"./AppTextField.vue_vue_type_script_setup_true_lang-93dc1e26.js";import{_ as _e}from"./edit-terms.vue_vue_type_script_setup_true_lang-7557c993.js";import{i as c}from"./index-4532b75c.js";import{u as ke}from"./useApi-776c55ea.js";import{c as xe}from"./createUrl-149317bf.js";import{$ as A}from"./api-0c1dfdf3.js";import{d as Ve,r as u,R as H,b6 as we,o as y,c as he,b as o,f as a,e as v,p as s,aI as C,a4 as p,x as r,y as j,t as R,h as _,a9 as D,A as k,F as Te,a as De}from"./index-75b434bc.js";import{V as $e}from"./VDataTable-c3cccdda.js";import{V as z}from"./VChip-e2ddd660.js";import{V as S}from"./VCard-95c0d706.js";import{V as f}from"./VCardText-76f31582.js";import{V as E}from"./VDialog-bc06d443.js";import"./form-2b416184.js";import"./VSelect-54e8b29a.js";import"./VTextField-05e93cc8.js";/* empty css                   */import"./VCounter-3e4b236e.js";import"./transition-6afda34e.js";import"./VField-82993695.js";import"./easing-9f15041e.js";import"./VInput-b46333d7.js";import"./forwardRefs-8348545e.js";import"./index-97808f23.js";import"./VList-c7d4c8b4.js";import"./ssrBoot-7f224ca6.js";import"./createSimpleFunctional-4b3a0a39.js";import"./VAvatar-071125b9.js";import"./VImg-ba4b392a.js";import"./VDivider-fc890531.js";import"./dialog-transition-14fdab67.js";import"./VMenu-3f143933.js";import"./VOverlay-0b79a00d.js";import"./lazy-0bb5e457.js";import"./scopeId-ee2feb8e.js";import"./VCheckboxBtn-0f22f589.js";import"./VSelectionControl-e1264669.js";import"./TiptapEditor.vue_vue_type_style_index_0_lang-e76d5625.js";import"./index-78b172a6.js";import"./VRow-d6f20668.js";/* empty css              */import"./VCol-35b3d337.js";import"./index-2898f57d.js";import"./VTable-de2d1039.js";import"./filter-3bfef89c.js";const Ae={class:"d-flex flex-wrap gap-4 mx-5 my-5"},je={class:"d-flex align-center flex-wrap gap-4"},Se={class:"d-flex gap-4 flex-wrap align-center"},Ue={class:"text-h6"},Pe={href:"javascript:void(0)"},Ie=v("br",null,null,-1),Be=v("br",null,null,-1),Ee=v("br",null,null,-1),Fe=v("br",null,null,-1),Re=v("br",null,null,-1),Pt=Ve({__name:"terms-conditions",async setup(ze){let F,N;const O=u(""),q=u(),U=u(50),Y=u(1);u();const J=u(),i=u(null),K=u(),x=u(!1),$=u(!1),V=u(!1),w=u(!1),h=u(!1),T=u(!1),P=u(null),I=u(""),L=n=>{i.value=n,$.value=!0},X=n=>{i.value=n,V.value=!0},Z=n=>{i.value=n,w.value=!0},M=n=>{i.value=n,h.value=!0},ee=n=>{i.value=n,T.value=!0},te=n=>{i.value=n,x.value=!0},oe=u([{title:"Active",value:"active"},{title:"In active",value:"inactive"}]),Q=n=>n&&n==="active"?{color:"error",icon:"tabler-circle-dot"}:{color:"primary",icon:"tabler-circle-check"},ae=n=>n==="active"?{text:"Active",color:"success"}:n==="waiting_checker_approval"?{text:"Pending Checker",color:"info"}:{text:"Inactive",color:"error"},ne=n=>{if(n==="admin")return{text:"Admin",color:"primary"};if(n==="crm")return{text:"CRM",color:"info"};if(n==="vendor")return{text:"Vendor",color:"primary"};if(n==="anchor")return{text:"Archor",color:"info"};if(n==="bank")return{text:"Bank",color:"primary"};if(n==="dealer")return{text:"Dealer",color:"info"}},le=n=>n==="vendor_financing"?{text:"Vendor Financing"}:n==="dealer_financing"?{text:"Dealer Financing"}:n==="factoring"?{text:"Factoring"}:{text:"Unknown"},se=[{title:"T&C Name",key:"name"},{title:"Section",key:"section"},{title:"Product Type",key:"product_type"},{title:"Status",key:"status"},{title:"Actions",key:"actions",sortable:!1}],re=H(()=>({q:O.value,status:q.value,page:Y.value,itemsPerPage:U.value,orderBy:J.value})),{data:ie,execute:g}=([F,N]=we(()=>ke(xe("/UI/configurations/terms-and-conditions",{query:re}))),F=await F,N(),F),ue=H(()=>ie.value.data);g();const ce=async n=>{var t,m;try{const l=await A("/UI/configurations/activate/terms-and-condition/approve",{method:"POST",body:{terms_id:n}});l.message==="Terms and Condition approved successfully"?(c.success(l.message||"Terms and Condition approved successfully",{position:"top-right",autoClose:3e3}),await g(),V.value=!1):l.status===403?c.warn(l.message||"You cannot approve this terms and condition",{position:"top-right",autoClose:3e3}):c.error(l.message||"Something went wrong",{position:"top-right",autoClose:3e3})}catch(l){const d=((m=(t=l.response)==null?void 0:t.data)==null?void 0:m.message)||"Error approving the terms and condition";c.error(d,{position:"top-right",autoClose:3e3})}},de=async n=>{var t,m;try{const l=await A("/UI/configurations/activate/terms-and-condition/reject",{method:"POST",body:{terms_id:n}});l.message==="Terms and Condition rejected successfully"?(c.success(l.message||"Terms and Condition rejected successfully",{position:"top-right",autoClose:3e3}),await g(),w.value=!1):l.status===403?c.warn(l.message||"You cannot reject this terms and condition",{position:"top-right",autoClose:3e3}):c.error(l.message||"Something went wrong",{position:"top-right",autoClose:3e3})}catch(l){const d=((m=(t=l.response)==null?void 0:t.data)==null?void 0:m.message)||"Error rejecting the terms and condition";c.error(d,{position:"top-right",autoClose:3e3})}},pe=async n=>{var t,m;try{const l=await A("UI/configurations/activate/terms-and-condition/enable",{method:"POST",body:{terms_id:n}});l.message==="Activation initiated successfully"?(c.success(l.message||"Activation initiated successfully",{position:"top-right",autoClose:3e3}),await g(),h.value=!1):l.status===403?c.warn(l.message||"You cannot enable this terms and condition",{position:"top-right",autoClose:3e3}):c.error(l.message||"Something went wrong",{position:"top-right",autoClose:3e3})}catch(l){const d=((m=(t=l.response)==null?void 0:t.data)==null?void 0:m.message)||"Error enabling the terms and condition";c.error(d,{position:"top-right",autoClose:3e3})}},me=async n=>{var t,m;try{const l=await A("/UI/configurations/activate/terms-and-condition/disable",{method:"POST",body:{terms_id:n}});l.message==="Deactivation initiated successfully"?(c.success(l.message||"Deactivation initiated successfully",{position:"top-right",autoClose:3e3}),await g(),T.value=!1):l.status===403?c.warn(l.message||"You cannot disable this terms and condition",{position:"top-right",autoClose:3e3}):c.error(l.message||"Something went wrong",{position:"top-right",autoClose:3e3})}catch(l){const d=((m=(t=l.response)==null?void 0:t.data)==null?void 0:m.message)||"Error disabling the terms and condition";c.error(d,{position:"top-right",autoClose:3e3})}},fe=async n=>{try{await A(`/UI/configurations/delete/terms-and-conditions/${n}`,{method:"POST",onResponseError({response:t}){errors.value=t._data.errors}}),await g(),$.value=!1}catch(t){console.error(t)}},ve=async n=>{await A("/UI/configurations/activate/terms-and-conditions",{method:"POST",body:{ids:n,status:K.value}}),await g()},W=async()=>{O.value=I.value,q.value=P.value,await g()},ge=()=>{I.value="",P.value="",Y.value=1,W()};return g(),(n,t)=>{const m=be,l=Ce,d=De("IconBtn"),B=ye;return y(),he(Te,null,[o(S,{class:"mb-6"},{default:a(()=>[v("div",Ae,[v("div",je,[o(m,{modelValue:s(I),"onUpdate:modelValue":t[0]||(t[0]=e=>C(I)?I.value=e:null),class:"me-3","clear-icon":"tabler-circle-x",clearable:"",color:"primary",placeholder:"Template Name",style:{"inline-size":"200px"},type:"text"},null,8,["modelValue"]),o(l,{modelValue:s(P),"onUpdate:modelValue":t[1]||(t[1]=e=>C(P)?P.value=e:null),items:s(oe),class:"me-3","clear-icon":"tabler-x",clearable:"",placeholder:"Status",style:{"inline-size":"100px"}},null,8,["modelValue","items"]),o(p,{color:"primary","prepend-icon":"tabler-search",style:{"text-size-adjust":"auto","text-transform":"none"},onClick:W}),o(p,{color:"primary","prepend-icon":"tabler-refresh",style:{"text-size-adjust":"auto","text-transform":"none"},onClick:ge})]),v("div",Se,[o(l,{modelValue:s(U),"onUpdate:modelValue":t[2]||(t[2]=e=>C(U)?U.value=e:null),items:[5,10,20,25,50]},null,8,["modelValue"]),o(p,{color:"primary","prepend-icon":"tabler-download",style:{"text-size-adjust":"auto","text-transform":"none"}}),o(p,{color:"primary","prepend-icon":"tabler-plus",style:{"text-size-adjust":"auto","text-transform":"none"},onClick:t[3]||(t[3]=e=>n.$router.push("/configurations/view/add-terms-conditions"))},{default:a(()=>[r(" Add Terms & Conditions ")]),_:1})])]),o(s($e),{headers:se,items:s(ue),"items-per-page":s(U),class:"text-no-wrap"},{"item.name":a(({item:e})=>[v("h6",Ue,[v("a",Pe,j(e.name),1)])]),"item.status":a(({item:e})=>[o(z,R({density:"default",label:""},ae(e.status)),null,16)]),"item.section":a(({item:e})=>[o(z,R({density:"default",label:""},ne(e.section)),null,16)]),"item.product_type":a(({item:e})=>[o(z,R({density:"default",label:""},le(e.product_type)),null,16)]),"item.actions":a(({item:e})=>[e.status==="active"||e.status==="inactive"?(y(),_(d,{key:0,onClick:b=>te(e)},{default:a(()=>[o(D,{icon:"tabler-pencil",color:"warning"})]),_:2},1032,["onClick"])):k("",!0),e.status==="waiting_checker_approval"&&e.pending_action==="activate"||e.pending_action==="deactivate"&&e.checker_status===!0?(y(),_(d,{key:1},{default:a(()=>{var b,G;return[o(D,{icon:(b=Q(e.status))==null?void 0:b.icon,color:(G=Q(e.status))==null?void 0:G.color,title:e.status,onClick:Ne=>ve([e.id])},null,8,["icon","color","title","onClick"])]}),_:2},1024)):k("",!0),e.status==="active"||e.status==="inactive"?(y(),_(d,{key:2},{default:a(()=>[o(D,{icon:"tabler-trash",color:"error",onClick:b=>L(e)},null,8,["onClick"])]),_:2},1024)):k("",!0),e.checker_status===!0&&e.pending_action==="Email Template Created - Waiting Checker Approval"?(y(),_(d,{key:3},{default:a(()=>[o(D,{icon:"tabler-square-check",color:"success",onClick:b=>X(e)},null,8,["onClick"])]),_:2},1024)):k("",!0),e.checker_status===!0&&e.pending_action==="Email Template Created - Waiting Checker Approval"?(y(),_(d,{key:4},{default:a(()=>[o(D,{icon:"tabler-square-x",color:"error",onClick:b=>Z(e)},null,8,["onClick"])]),_:2},1024)):k("",!0),e.status==="inactive"&&e.pending_action===null?(y(),_(d,{key:5},{default:a(()=>[o(D,{icon:"tabler-thumb-down",color:"error",onClick:b=>M(e)},null,8,["onClick"])]),_:2},1024)):k("",!0),e.status==="active"&&e.pending_action===null?(y(),_(d,{key:6},{default:a(()=>[o(D,{icon:"tabler-thumb-up",color:"success",onClick:b=>ee(e)},null,8,["onClick"])]),_:2},1024)):k("",!0)]),_:1},8,["items","items-per-page"])]),_:1}),s(x)?(y(),_(_e,{key:0,isDialogVisible:s(x),"onUpdate:isDialogVisible":t[4]||(t[4]=e=>C(x)?x.value=e:null),template:s(i)},null,8,["isDialogVisible","template"])):k("",!0),o(E,{modelValue:s($),"onUpdate:modelValue":t[8]||(t[8]=e=>C($)?$.value=e:null),persistent:"",class:"v-dialog-sm"},{default:a(()=>[o(B,{onClick:t[5]||(t[5]=e=>x.value=!s(x))}),o(S,null,{default:a(()=>[o(f,null,{default:a(()=>[r(" Are you sure you want to delete template: "+j(s(i).name)+"? ",1),Ie,r(" This action can not be undone. ")]),_:1}),o(f,{class:"d-flex justify-end gap-3 flex-wrap"},{default:a(()=>[o(p,{color:"secondary",variant:"tonal",onClick:t[6]||(t[6]=e=>$.value=!1)},{default:a(()=>[r(" Cancel ")]),_:1}),o(p,{color:"error",onClick:t[7]||(t[7]=e=>fe(s(i).id))},{default:a(()=>[r(" Delete ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(E,{modelValue:s(V),"onUpdate:modelValue":t[12]||(t[12]=e=>C(V)?V.value=e:null),persistent:"",class:"v-dialog-sm"},{default:a(()=>[o(B,{onClick:t[9]||(t[9]=e=>V.value=!1)}),o(S,null,{default:a(()=>[o(f,null,{default:a(()=>[r(" Are you sure you want to Approve this Terms template: "+j(s(i).name)+"? ",1),Be,r(" This action cannot be undone. ")]),_:1}),o(f,{class:"d-flex justify-end gap-3 flex-wrap"},{default:a(()=>[o(p,{color:"secondary",variant:"tonal",onClick:t[10]||(t[10]=e=>V.value=!1)},{default:a(()=>[r(" Cancel ")]),_:1}),o(p,{color:"success",onClick:t[11]||(t[11]=e=>ce(s(i).id))},{default:a(()=>[r(" Approve ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(E,{modelValue:s(w),"onUpdate:modelValue":t[16]||(t[16]=e=>C(w)?w.value=e:null),persistent:"",class:"v-dialog-sm"},{default:a(()=>[o(B,{onClick:t[13]||(t[13]=e=>w.value=!1)}),o(S,null,{default:a(()=>[o(f,null,{default:a(()=>[r(" Are you sure you want to Reject this Terms template: "+j(s(i).name)+"? ",1),Ee,r(" This action cannot be undone. ")]),_:1}),o(f,{class:"d-flex justify-end gap-3 flex-wrap"},{default:a(()=>[o(p,{color:"secondary",variant:"tonal",onClick:t[14]||(t[14]=e=>w.value=!1)},{default:a(()=>[r(" Cancel ")]),_:1}),o(p,{color:"error",onClick:t[15]||(t[15]=e=>de(s(i).id))},{default:a(()=>[r(" Reject ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(E,{modelValue:s(h),"onUpdate:modelValue":t[20]||(t[20]=e=>C(h)?h.value=e:null),persistent:"",class:"v-dialog-sm"},{default:a(()=>[o(B,{onClick:t[17]||(t[17]=e=>h.value=!1)}),o(S,null,{default:a(()=>[o(f,null,{default:a(()=>[r(" Are you sure you want to Enable this Terms template: "+j(s(i).name)+"? ",1),Fe,r(" This action cannot be undone. ")]),_:1}),o(f,{class:"d-flex justify-end gap-3 flex-wrap"},{default:a(()=>[o(p,{color:"secondary",variant:"tonal",onClick:t[18]||(t[18]=e=>h.value=!1)},{default:a(()=>[r(" Cancel ")]),_:1}),o(p,{color:"success",onClick:t[19]||(t[19]=e=>pe(s(i).id))},{default:a(()=>[r(" Enable ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(E,{modelValue:s(T),"onUpdate:modelValue":t[24]||(t[24]=e=>C(T)?T.value=e:null),persistent:"",class:"v-dialog-sm"},{default:a(()=>[o(B,{onClick:t[21]||(t[21]=e=>T.value=!1)}),o(S,null,{default:a(()=>[o(f,null,{default:a(()=>[r(" Are you sure you want to Disable this Terms template: "+j(s(i).name)+"? ",1),Re,r(" This action cannot be undone. ")]),_:1}),o(f,{class:"d-flex justify-end gap-3 flex-wrap"},{default:a(()=>[o(p,{color:"secondary",variant:"tonal",onClick:t[22]||(t[22]=e=>T.value=!1)},{default:a(()=>[r(" Cancel ")]),_:1}),o(p,{color:"error",onClick:t[23]||(t[23]=e=>me(s(i).id))},{default:a(()=>[r(" Disable ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}});export{Pt as default};
