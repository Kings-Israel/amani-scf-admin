import{_ as re}from"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-9e7a34d5.js";import{_ as ne}from"./AppDateTimePicker.vue_vue_type_style_index_0_lang-56955411.js";import{_ as ie}from"./AppSelect.vue_vue_type_script_setup_true_lang-67ce80f3.js";import{_ as ue}from"./AppTextField.vue_vue_type_script_setup_true_lang-298ad98d.js";import{d as ce,r,b6 as de,R as E,o as b,c as j,b as e,f as a,e as h,p as s,aI as f,t as me,a9 as w,a$ as pe,F as M,j as fe,a4 as y,x as m,h as $,A as H,y as _e,aM as ve,a as Ve}from"./index-5caaa453.js";import{_ as be}from"./EditRatesDialog.vue_vue_type_style_index_0_lang-f029d073.js";import{u as ye}from"./useApi-c9327355.js";import{c as ge}from"./createUrl-3e678c2b.js";import{$ as S}from"./api-44dd0fa9.js";import{V as i}from"./VCol-bcc5388c.js";import{V as A,a as xe}from"./VCard-1a5b2c5e.js";import{V as B}from"./VCardText-3b4da816.js";import{V as Ce}from"./VDataTableServer-64dc84b4.js";import{V as ke}from"./VChip-49676f7d.js";import{V as Re}from"./VForm-ed4803d2.js";import{V as I}from"./VRow-e44df108.js";import{V as Ue}from"./VDialog-808ce03e.js";import"./VField-6b3808ed.js";import"./form-c9c578a3.js";import"./easing-9f15041e.js";import"./VInput-e87890b4.js";import"./transition-1886cce0.js";import"./VSelect-f0a443ce.js";import"./VTextField-604d91ff.js";/* empty css                   */import"./VCounter-728f7f8c.js";import"./forwardRefs-8348545e.js";import"./index-7dd1f5f0.js";import"./VList-4b1bf96e.js";import"./ssrBoot-2696bccc.js";import"./createSimpleFunctional-9624028d.js";import"./VAvatar-3ee4c690.js";import"./VImg-6009f8f0.js";import"./VDivider-d40713ce.js";import"./dialog-transition-1ae6ec72.js";import"./VMenu-97c48b4e.js";import"./VOverlay-da001e16.js";import"./lazy-9cd674a5.js";import"./scopeId-484eb469.js";import"./VCheckboxBtn-1d552264.js";import"./VSelectionControl-e0df1dbd.js";import"./validators-db74a876.js";import"./helpers-681711bc.js";import"./VSnackbar-ea7773d7.js";import"./index-2898f57d.js";/* empty css              */import"./VDataTable-1493872b.js";import"./VTable-f9bab7db.js";import"./filter-aecd5fc1.js";const we={class:"d-flex flex-wrap gap-4 mx-5 my-5"},he={class:"d-flex align-center"},De={class:"config-d-flex flex-wrap mx-5"},$e=h("br",null,null,-1),ht=ce({__name:"baserates",async setup(Se){let g,T;r(!0),r(0);const x=r(""),C=r(),k=r(10),_=r(1),P=r(),F=r(),L=r(),v=r(null),V=r(!1),u=r(!1),Q=[{title:"Rate Code",key:"rate_code"},{title:"Rate",key:"rate"},{title:"Status",key:"status"},{title:"Actions",key:"actions",sortable:!1}],G=l=>{var o,c;_.value=l.page,P.value=(o=l.sortBy[0])==null?void 0:o.key,F.value=(c=l.sortBy[0])==null?void 0:c.order},N=r([{title:"Active",value:"active"},{title:"In active",value:"inactive"}]),{data:O,execute:D}=([g,T]=de(()=>ye(ge("/UI/configurations/base-rates",{query:{q:x,status:C,page:_,itemsPerPage:k,sortBy:P,orderBy:F}}))),g=await g,T(),g),J=E(()=>O.value.data),K=E(()=>O.value.total),q=r({message:void 0,statusCode:void 0}),W=l=>{v.value=l,u.value=!0},X=l=>{v.value=l,V.value=!0},p=r([]),Y=()=>{p.value.push({rate_code:"",rate:"",future_rate:"",effective_date:"Active"})},Z=l=>{p.value.splice(l,1)},z=l=>l&&l==="active"?{color:"success",icon:"tabler-thumb-up"}:{color:"error",icon:"tabler-thumb-down"},ee=l=>l==="active"?{text:"Active",color:"success"}:{text:"Inactive",color:"error"},te=async()=>{try{for(const o of p.value){const c=await S("/UI/configurations/base-rate",{method:"POST",body:{rate_code:o.rate_code,rate:o.rate,future_rate:o.future_rate,effective_date:o.effective_date},onResponseError({response:R}){q.value=R._data.errors}})}p.value=[{rate_code:"",rate:"",future_rate:"",effective_date:""}],await ve(()=>{D()});const{message:l}=res}catch(l){console.error(l)}},ae=async l=>{try{await S(`UI/configurations/delete/base-rates-configurations/${l}`,{method:"POST",onResponseError({response:o}){q.value=o._data.errors}}),await D(),u.value=!1}catch(o){console.error(o)}},oe=async l=>{await S("UI/configurations/activate/base-rates-configurations",{method:"POST",body:{ids:l,status:L.value}}),await D()};return(l,o)=>{const c=ue,R=ie,U=Ve("IconBtn"),le=ne,se=re;return b(),j(M,null,[e(I,null,{default:a(()=>[e(i,{cols:"12",md:"12"},{default:a(()=>[e(A,{class:"mt-5"},{default:a(()=>[e(B,null,{default:a(()=>[h("div",we,[h("div",he,[e(c,{modelValue:s(x),"onUpdate:modelValue":o[0]||(o[0]=t=>f(x)?x.value=t:null),class:"me-3","clear-icon":"tabler-circle-x",clearable:"",color:"primary",placeholder:"Rate Code",style:{"inline-size":"200px"},type:"text"},null,8,["modelValue"]),e(R,{modelValue:s(C),"onUpdate:modelValue":o[1]||(o[1]=t=>f(C)?C.value=t:null),items:s(N),class:"me-3","clear-icon":"tabler-x",clearable:"",placeholder:"Status",style:{"inline-size":"200px"}},null,8,["modelValue","items"])])]),e(s(Ce),{"items-per-page":s(k),"onUpdate:itemsPerPage":o[2]||(o[2]=t=>f(k)?k.value=t:null),page:s(_),"onUpdate:page":o[3]||(o[3]=t=>f(_)?_.value=t:null),headers:Q,items:s(J),"items-length":s(K),class:"text-no-wrap","show-select":"","onUpdate:options":G},{"item.status":a(({item:t})=>[e(ke,me({density:"default",label:""},ee(t.status)),null,16)]),"item.actions":a(({item:t})=>[e(U,{onClick:d=>X(t)},{default:a(()=>[e(w,{icon:"tabler-pencil",color:"warning"})]),_:2},1032,["onClick"]),e(U,null,{default:a(()=>{var d,n;return[e(w,{icon:(d=z(t.status))==null?void 0:d.icon,color:(n=z(t.status))==null?void 0:n.color,title:t.status,onClick:Ae=>oe([t.id])},null,8,["icon","color","title","onClick"])]}),_:2},1024),e(U,null,{default:a(()=>[e(w,{icon:"tabler-trash",color:"danger",onClick:d=>W(t)},null,8,["onClick"])]),_:2},1024)]),_:1},8,["items-per-page","page","items","items-length"]),e(A,null,{default:a(()=>[e(xe,null,{default:a(()=>[e(Re,{onSubmit:pe(()=>{},["prevent"])},{default:a(()=>[(b(!0),j(M,null,fe(s(p),(t,d)=>(b(),$(I,{key:d},{default:a(()=>[h("div",De,[e(i,{cols:"12",md:"2"},{default:a(()=>[e(c,{modelValue:t.rate_code,"onUpdate:modelValue":n=>t.rate_code=n,label:"Rate Code",placeholder:"Rate Code"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(i,{cols:"12",md:"2"},{default:a(()=>[e(c,{modelValue:t.rate,"onUpdate:modelValue":n=>t.rate=n,type:"number",label:"Rate (%)",placeholder:"%"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(i,{cols:"12",md:"2"},{default:a(()=>[e(c,{modelValue:t.future_rate,"onUpdate:modelValue":n=>t.future_rate=n,label:"Future Rate",placeholder:"Future Rate"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(i,{cols:"12",md:"3"},{default:a(()=>[e(le,{modelValue:t.effective_date,"onUpdate:modelValue":n=>t.effective_date=n,"append-inner-icon":"tabler-calendar-due",label:"Date",placeholder:"Select Date"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(i,{cols:"12",md:"2"},{default:a(()=>[e(R,{modelValue:t.status,"onUpdate:modelValue":n=>t.status=n,items:s(N),class:"me-1","clear-icon":"tabler-x",clearable:"",placeholder:"Status",style:{"inline-size":"200px"}},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),e(i,{cols:"12",md:"1"},{default:a(()=>[e(U,{onClick:n=>Z(d)},{default:a(()=>[e(w,{icon:"tabler-trash",color:"error"})]),_:2},1032,["onClick"])]),_:2},1024)])]),_:2},1024))),128)),e(I,null,{default:a(()=>[e(i,{cols:"12",md:"2",class:"text-left"},{default:a(()=>[e(y,{color:"primary",onClick:Y},{default:a(()=>[m(" Add New Rate ")]),_:1})]),_:1}),s(p).length>0?(b(),$(i,{key:0,class:"d-flex gap-4",cols:"12",md:"4"},{default:a(()=>[e(y,{type:"submit",onClick:te},{default:a(()=>[m(" Submit ")]),_:1}),e(y,{color:"secondary",type:"reset",variant:"tonal"},{default:a(()=>[m(" Reset ")]),_:1})]),_:1})):H("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),s(V)?(b(),$(be,{key:0,isDialogVisible:s(V),"onUpdate:isDialogVisible":o[4]||(o[4]=t=>f(V)?V.value=t:null),rate:s(v)},null,8,["isDialogVisible","rate"])):H("",!0),e(Ue,{modelValue:s(u),"onUpdate:modelValue":o[8]||(o[8]=t=>f(u)?u.value=t:null),persistent:"",class:"v-dialog-sm"},{default:a(()=>[e(se,{onClick:o[5]||(o[5]=t=>u.value=!s(u))}),e(A,null,{default:a(()=>[e(B,null,{default:a(()=>[m(" Are you sure you want to delete rate: "+_e(s(v).rate_code)+"? ",1),$e,m(" This action can not be undone. ")]),_:1}),e(B,{class:"d-flex justify-end gap-3 flex-wrap"},{default:a(()=>[e(y,{color:"secondary",variant:"tonal",onClick:o[6]||(o[6]=t=>u.value=!1)},{default:a(()=>[m(" Cancel ")]),_:1}),e(y,{color:"error",onClick:o[7]||(o[7]=t=>ae(s(v).id))},{default:a(()=>[m(" Delete ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}});export{ht as default};
