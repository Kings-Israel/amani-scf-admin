import{_ as L}from"./AppStepper.vue_vue_type_style_index_0_lang-c08c6f80.js";import{_ as j}from"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-035125fd.js";import{V as _}from"./VCol-35b3d337.js";import{V as W}from"./VFileInput-0c012a84.js";import{V as q}from"./VDialog-bc06d443.js";import{d as A,r,w as G,o as p,h as x,f as e,b as t,e as N,y as z,a4 as P,t as O,x as S,c as C,A as H,aR as J,aS as K,k as Q,l as X,I as Y,p as g,aI as U,z as Z,F as I,j as ee,b7 as te,aM as ae}from"./index-75b434bc.js";import{V as R}from"./VCard-95c0d706.js";import{V as $}from"./VCardText-76f31582.js";import{V as M}from"./VRow-d6f20668.js";import{_ as oe}from"./_plugin-vue_export-helper-c27b6911.js";import{$ as B}from"./api-0c1dfdf3.js";import{V as le}from"./VSnackbar-f21966b4.js";import{V as se,a as E}from"./VWindowItem-04415d19.js";import{V as re}from"./VContainer-7fd98f8e.js";import"./VSlideGroup-3e745b05.js";import"./VSlideGroupItem-95742265.js";/* empty css              */import"./VField-82993695.js";import"./form-2b416184.js";import"./easing-9f15041e.js";import"./VInput-b46333d7.js";import"./transition-6afda34e.js";import"./forwardRefs-8348545e.js";import"./VChip-e2ddd660.js";import"./VAvatar-071125b9.js";import"./VImg-ba4b392a.js";import"./index-97808f23.js";import"./VCounter-3e4b236e.js";import"./VOverlay-0b79a00d.js";import"./lazy-0bb5e457.js";import"./scopeId-ee2feb8e.js";import"./dialog-transition-14fdab67.js";import"./createSimpleFunctional-4b3a0a39.js";import"./index-2898f57d.js";import"./ssrBoot-7f224ca6.js";const ne=V=>(J("data-v-eba73894"),V=V(),K(),V),ue={class:"text-h6 font-weight-medium"},ie=ne(()=>N("p",{class:"mb-0"}," Upload the document ",-1)),de=["src"],ce=A({__name:"Document",props:{document:{}},emits:["update:fileData","change"],setup(V,{emit:b}){const k=V,i=b,D=r(k.document),d=r(),y=r(null),v=r(!1),c=r(!0);function w(m){const l=m.target;if(!l.files||l.files.length===0){alert("No file selected!"),l.value="",h();return}const f=l.files[0];if(f.type!=="application/pdf"){alert("Please select a PDF file."),l.value="",h();return}if(f.size>25e5){alert("The PDF file is too large."),l.value="",h();return}c.value=!1;const n=new FileReader;n.onload=o=>{var a;if((a=o.target)!=null&&a.result){y.value=o.target.result;const u={file:f,url:o.target.result};F(u)}},n.readAsDataURL(f)}function F(m){d.value=m,console.log(m.file);const l={url:m.url,file:m.file};i("update:fileData",l)}function h(){i("change",d.value)}return G(c,()=>{console.log(c)}),(m,l)=>{const f=j;return p(),x(M,null,{default:e(()=>[t(_,{cols:"12"},{default:e(()=>[N("h6",ue,z(D.value),1),ie]),_:1}),t(_,{cols:"12",md:"6"},{default:e(()=>[t(W,{accept:"application/pdf",clearable:"",label:"Select PDF",onChange:w,"onClick:clear":h})]),_:1}),t(_,{cols:"12",md:"6"},{default:e(()=>[t(q,{modelValue:v.value,"onUpdate:modelValue":l[2]||(l[2]=n=>v.value=n),class:"v-dialog-sm demo-space-x"},{activator:e(({props:n})=>[t(P,O({disabled:c.value,color:"success"},n),{default:e(()=>[S(" Preview ")]),_:2},1040,["disabled"])]),default:e(()=>[t(f,{onClick:l[0]||(l[0]=n=>v.value=!v.value)}),t(R,{title:"File Upload"},{default:e(()=>[t($,null,{default:e(()=>[y.value?(p(),C("iframe",{key:0,src:y.value,height:"500",style:{border:"none"},width:"100%"},null,8,de)):H("",!0)]),_:1}),t($,{class:"d-flex justify-end flex-wrap gap-3"},{default:e(()=>[t(P,{color:"success",variant:"tonal",onClick:l[1]||(l[1]=n=>v.value=!1)},{default:e(()=>[S(" Agree ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}});const me=oe(ce,[["__scopeId","data-v-eba73894"]]),pe={key:0},fe={key:1},Qe=A({__name:"[uuid]",setup(V){const b=r(!1),k=r(!1),i=r([]),D=r(null),d=r(0),y=Q(),v=X(),c=r(y.params.uuid),w=r({message:void 0,statusCode:void 0}),F=r({message:void 0,statusCode:void 0}),h=async()=>{var o;try{const a=await B(`/get/uuid/document/${c.value}`,{method:"GET",params:(o=c.value)==null?void 0:o.toString,onResponseError({response:s}){w.value=s._data.errors}}),{data:u}=a;console.log(u),D.value=u.documents.split(",").map(s=>s.trim())}catch(a){console.error(a)}};Y(()=>{h()});const m=[{title:"Documents",subtitle:"List of Required Documents",icon:"tabler-users"}],l=o=>{i.value.push(o)},f=o=>{console.log("File to remove",o),console.log("Files before removing",i.value),i.value=i.value.filter(a=>a.file.name!==o.file.name||a.file.lastModified!==o.file.lastModified),console.log("Files after removing",i.value)},n=async()=>{const o=new FormData;c.value!==void 0&&o.append("uuid",c.value.toString()),i.value.forEach((a,u)=>{o.append(`files[${u}]`,a.file)}),k.value=!0;try{const a=await B("/post/uuid/document",{method:"POST",body:o,onResponseError({response:s}){w.value=s._data.errors}}),{message:u}=a;b.value=!0,F.value.message=u}catch(a){console.error(a)}await ae(()=>{v.push("/documents/uploaded")})};return(o,a)=>{const u=L;return p(),C(I,null,[t(le,{modelValue:g(b),"onUpdate:modelValue":a[0]||(a[0]=s=>U(b)?b.value=s:null),color:"success",location:"top end",variant:"flat"},{default:e(()=>[S(z(g(F).message),1)]),_:1},8,["modelValue"]),t(R,null,{default:e(()=>[t(M,{"no-gutters":""},{default:e(()=>[t(_,{class:Z(o.$vuetify.display.mdAndUp?"border-e":"border-b"),cols:"12",lg:"3",md:"4"},{default:e(()=>[t($,null,{default:e(()=>[t(u,{"current-step":g(d),"onUpdate:currentStep":a[1]||(a[1]=s=>U(d)?d.value=s:null),items:m,class:"stepper-icon-step-bg",direction:"vertical","icon-size":"24"},null,8,["current-step"])]),_:1})]),_:1},8,["class"]),t(_,{cols:"12",lg:"9",md:"8"},{default:e(()=>[t($,null,{default:e(()=>[t(se,{modelValue:g(d),"onUpdate:modelValue":a[2]||(a[2]=s=>U(d)?d.value=s:null),class:"disable-tab-transition"},{default:e(()=>[g(D)?(p(),x(E,{key:0},{default:e(()=>[(p(!0),C(I,null,ee(g(D),(s,T)=>(p(),x(me,{key:T,document:s,onChange:f,"onUpdate:fileData":l},null,8,["document"]))),128))]),_:1})):(p(),x(E,{key:1},{default:e(()=>[S(" Error ")]),_:1}))]),_:1},8,["modelValue"])]),_:1}),t(_,null,{default:e(()=>[t(re,null,{default:e(()=>[t(R,{class:"p-2 m-5"},{default:e(()=>[t(_,null,{default:e(()=>[t(_,{class:"d-flex gap-4 align-items-end",cols:"12"},{default:e(()=>[g(k)?(p(),C("div",pe,[t(te,{color:"primary",indeterminate:""})])):(p(),C("div",fe,[t(P,{type:"submit",onClick:n},{default:e(()=>[S(" submit ")]),_:1})]))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}}});export{Qe as default};
