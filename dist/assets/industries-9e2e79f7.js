import{_ as ge}from"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-035125fd.js";import{_ as be}from"./AppSelect.vue_vue_type_script_setup_true_lang-32a0f469.js";import{_ as Ce}from"./AppTextField.vue_vue_type_script_setup_true_lang-93dc1e26.js";import{_ as _e}from"./AddIndustryDialog.vue_vue_type_script_setup_true_lang-26c58696.js";import{_ as Ve}from"./EditIndustryDialog.vue_vue_type_script_setup_true_lang-029233b3.js";import{i as d}from"./index-4532b75c.js";import{u as N,w as ke}from"./xlsx-d63df831.js";import{u as we}from"./useApi-776c55ea.js";import{c as xe}from"./createUrl-149317bf.js";import{$ as w}from"./api-0c1dfdf3.js";import{d as he,r,R,b6 as De,o as b,c as $e,b as a,f as o,e as v,a4 as c,x as n,p as Ae,y as g,t as je,h as V,A as k,a9 as x,F as Te,a as Ie}from"./index-75b434bc.js";import{V as Se}from"./VDataTable-c3cccdda.js";import{V as Ee}from"./VChip-e2ddd660.js";import{V as Pe}from"./VDivider-fc890531.js";import{V as Ue}from"./VPagination-2b54b87a.js";import{V as h}from"./VCard-95c0d706.js";import{V as m}from"./VCardText-76f31582.js";import{V as S}from"./VDialog-bc06d443.js";import"./form-2b416184.js";import"./VSelect-54e8b29a.js";import"./VTextField-05e93cc8.js";/* empty css                   */import"./VCounter-3e4b236e.js";import"./transition-6afda34e.js";import"./VField-82993695.js";import"./easing-9f15041e.js";import"./VInput-b46333d7.js";import"./forwardRefs-8348545e.js";import"./index-97808f23.js";import"./VList-c7d4c8b4.js";import"./ssrBoot-7f224ca6.js";import"./createSimpleFunctional-4b3a0a39.js";import"./VAvatar-071125b9.js";import"./VImg-ba4b392a.js";import"./dialog-transition-14fdab67.js";import"./VMenu-3f143933.js";import"./VOverlay-0b79a00d.js";import"./lazy-0bb5e457.js";import"./scopeId-ee2feb8e.js";import"./VCheckboxBtn-0f22f589.js";import"./VSelectionControl-e1264669.js";import"./VRow-d6f20668.js";/* empty css              */import"./VCol-35b3d337.js";import"./index-2898f57d.js";import"./VTable-de2d1039.js";import"./filter-3bfef89c.js";const Be={class:"d-flex flex-wrap gap-4 mx-5 my-5"},Me={class:"d-flex align-center flex-wrap gap-4"},ze={class:"d-flex gap-4 flex-wrap align-center"},Fe={class:"text-h6"},Ne={href:"javascript:void(0)"},Re={class:"d-flex align-center justify-space-between flex-wrap gap-3 pa-5 pt-3"},qe={class:"text-sm text-medium-emphasis mb-0"},Oe=v("br",null,null,-1),Ye=v("br",null,null,-1),He=v("br",null,null,-1),Qe=v("br",null,null,-1),We=v("br",null,null,-1),Le=v("br",null,null,-1),Yt=he({__name:"industries",async setup(Ge){let E,q;const O=r(""),Y=r(),C=r(50),D=r(1);r();const K=r(),i=r(null);r();const P=r(null);r("");const U=r(""),B=r(!1),$=r(!1),f=r(!1),A=r(!1),j=r(!1),T=r(!1),M=r(!1),X=l=>{i.value=l,$.value=!0},Z=l=>{i.value=l,f.value=!0},ee=l=>{i.value=l,A.value=!0},te=l=>{i.value=l,j.value=!0},ae=l=>{i.value=l,T.value=!0},oe=l=>{i.value=l,B.value=!0},le=()=>{M.value=!0},se=r([{title:"Active",value:"active"},{title:"In active",value:"inactive"}]),H=l=>l==="active"?{text:"Active",color:"success"}:l==="waiting_checker_approval"?{text:"Pending Checker",color:"info"}:{text:"Inactive",color:"error"},F=l=>l==="deactivate"?{color:"error",icon:"tabler-circle-dot",action:me}:{color:"primary",icon:"tabler-circle-check",action:ve},ne=[{title:"Name",key:"name"},{title:"Status",key:"status"},{title:"Actions",key:"actions",sortable:!1}],ie=R(()=>({q:O.value,status:Y.value,page:D.value,itemsPerPage:C.value,orderBy:K.value})),{data:Q,execute:y}=([E,q]=De(()=>we(xe("/industries",{query:ie}))),E=await E,q(),E),W=R(()=>Q.value.data),z=R(()=>Q.value.total);y();const re=async l=>{var e,u;try{const s=await w("/industry/approve",{method:"POST",body:{industry_id:l}});s.message==="Industry approved successfully"?(d.success(s.message||"Industry approved successfully",{position:"top-right",autoClose:3e3}),await y(),f.value=!1):s.status===403?d.warn(s.message||"You cannot approve this industry",{position:"top-right",autoClose:3e3}):d.error(s.message||"Something went wrong",{position:"top-right",autoClose:3e3})}catch(s){const p=((u=(e=s.response)==null?void 0:e.data)==null?void 0:u.message)||"Error approving the industry";d.error(p,{position:"top-right",autoClose:3e3})}},ue=async l=>{var e,u;try{const s=await w("/industry/reject",{method:"POST",body:{industry_id:l}});s.message==="Industry rejected successfully"?(d.success(s.message||"Industry rejected successfully",{position:"top-right",autoClose:3e3}),await y(),A.value=!1):s.status===403?d.warn(s.message||"You cannot reject this industry",{position:"top-right",autoClose:3e3}):d.error(s.message||"Something went wrong",{position:"top-right",autoClose:3e3})}catch(s){const p=((u=(e=s.response)==null?void 0:e.data)==null?void 0:u.message)||"Error rejecting the industry";d.error(p,{position:"top-right",autoClose:3e3})}},de=async l=>{var e,u;try{const s=await w("/industry/initiate-activate",{method:"POST",body:{industry_id:l}});s.message==="Activation initiated successfully"?(d.success(s.message||"Activation initiated successfully",{position:"top-right",autoClose:3e3}),await y(),j.value=!1):s.status===403?d.warn(s.message||"You cannot activate this industry",{position:"top-right",autoClose:3e3}):d.error(s.message||"Something went wrong",{position:"top-right",autoClose:3e3})}catch(s){const p=((u=(e=s.response)==null?void 0:e.data)==null?void 0:u.message)||"Error activating the industry";d.error(p,{position:"top-right",autoClose:3e3})}},ce=async l=>{var e,u;try{const s=await w("/industry/initiate-deactivate",{method:"POST",body:{industry_id:l}});s.message==="Deactivation initiated successfully"?(d.success(s.message||"Deactivation initiated successfully",{position:"top-right",autoClose:3e3}),await y(),T.value=!1):s.status===403?d.warn(s.message||"You cannot deactivate this industry",{position:"top-right",autoClose:3e3}):d.error(s.message||"Something went wrong",{position:"top-right",autoClose:3e3})}catch(s){const p=((u=(e=s.response)==null?void 0:e.data)==null?void 0:u.message)||"Error deactivating the industry";d.error(p,{position:"top-right",autoClose:3e3})}},pe=async l=>{try{await w(`/industries/${l}`,{method:"DELETE",onResponseError({response:e}){errors.value=e._data.errors}}),await y(),$.value=!1}catch(e){console.error(e)}},ve=async l=>{try{await w(`/industries/${l}/activate`,{method:"PATCH"}),await y()}catch(e){console.error(e)}},me=async l=>{try{await w(`/industries/${l}/deactivate`,{method:"PATCH"}),await y()}catch(e){console.error(e)}},fe=()=>{const l=N.json_to_sheet(W.value.map(u=>({Name:u.name,Status:H(u.status).text}))),e=N.book_new();N.book_append_sheet(e,l,"Industries"),ke(e,"industries.xlsx")},L=async()=>{O.value=U.value,Y.value=P.value,await y()},ye=()=>{U.value="",P.value="",D.value=1,L()};return y(),(l,e)=>{const u=Ce,s=be,p=Ie("IconBtn"),I=ge;return b(),$e(Te,null,[a(h,{class:"mb-6"},{default:o(()=>[v("div",Be,[v("div",Me,[a(u,{modelValue:U.value,"onUpdate:modelValue":e[0]||(e[0]=t=>U.value=t),class:"me-3","clear-icon":"tabler-circle-x",clearable:"",color:"primary",placeholder:"Search",style:{"inline-size":"200px"},type:"text"},null,8,["modelValue"]),a(s,{modelValue:P.value,"onUpdate:modelValue":e[1]||(e[1]=t=>P.value=t),items:se.value,class:"me-3","clear-icon":"tabler-x",clearable:"",placeholder:"Status",style:{"inline-size":"100px"}},null,8,["modelValue","items"]),a(c,{color:"primary","prepend-icon":"tabler-search",style:{"text-size-adjust":"auto","text-transform":"none"},onClick:L}),a(c,{color:"primary","prepend-icon":"tabler-refresh",style:{"text-size-adjust":"auto","text-transform":"none"},onClick:ye})]),v("div",ze,[a(s,{modelValue:C.value,"onUpdate:modelValue":e[2]||(e[2]=t=>C.value=t),items:[5,10,20,25,50]},null,8,["modelValue"]),a(c,{color:"primary","prepend-icon":"tabler-download",style:{"text-size-adjust":"auto","text-transform":"none"},onClick:fe}),a(c,{color:"primary","prepend-icon":"tabler-plus",style:{"text-size-adjust":"auto","text-transform":"none"},onClick:le},{default:o(()=>[n(" Add Industry ")]),_:1})])]),a(Ae(Se),{headers:ne,items:W.value,"items-per-page":C.value,class:"text-no-wrap"},{"item.name":o(({item:t})=>[v("h6",Fe,[v("a",Ne,g(t.name),1)])]),"item.status":o(({item:t})=>[a(Ee,je({density:"default",label:""},H(t.status)),null,16)]),"item.actions":o(({item:t})=>[a(p,{onClick:_=>oe(t)},{default:o(()=>[t.status==="active"||t.status==="inactive"?(b(),V(x,{key:0,icon:"tabler-pencil",color:"warning"})):k("",!0)]),_:2},1032,["onClick"]),t.status==="waiting_checker_approval"&&t.pending_action==="activate"||t.pending_action==="deactivate"&&t.checker_status===!0?(b(),V(p,{key:0},{default:o(()=>{var _,G;return[a(x,{icon:(_=F(t.pending_action))==null?void 0:_.icon,color:(G=F(t.pending_action))==null?void 0:G.color,title:t.status,onClick:Je=>{var J;return(J=F(t.pending_action))==null?void 0:J.action(t.id)}},null,8,["icon","color","title","onClick"])]}),_:2},1024)):k("",!0),a(p,null,{default:o(()=>[a(x,{icon:"tabler-trash","is-disable-dialog-visible":"",color:"error",onClick:_=>X(t)},null,8,["onClick"])]),_:2},1024),t.checker_status===!0&&t.pending_action==="Industry Created - Waiting Checker Approval"?(b(),V(p,{key:1},{default:o(()=>[a(x,{icon:"tabler-square-check",color:"success",onClick:_=>Z(t)},null,8,["onClick"])]),_:2},1024)):k("",!0),t.checker_status===!0&&t.pending_action==="Industry Created - Waiting Checker Approval"?(b(),V(p,{key:2},{default:o(()=>[a(x,{icon:"tabler-square-x",color:"error",onClick:_=>ee(t)},null,8,["onClick"])]),_:2},1024)):k("",!0),t.status==="inactive"&&t.pending_action===null?(b(),V(p,{key:3},{default:o(()=>[a(x,{icon:"tabler-thumb-down",color:"error",onClick:_=>te(t)},null,8,["onClick"])]),_:2},1024)):k("",!0),t.status==="active"&&t.pending_action===null?(b(),V(p,{key:4},{default:o(()=>[a(x,{icon:"tabler-thumb-up",color:"success",onClick:_=>ae(t)},null,8,["onClick"])]),_:2},1024)):k("",!0)]),bottom:o(()=>[a(Pe),v("div",Re,[v("p",qe," Showing "+g((D.value-1)*C.value+1)+" to "+g(Math.min(D.value*C.value,z.value))+" of "+g(z.value)+" entries ",1),a(Ue,{modelValue:D.value,"onUpdate:modelValue":e[3]||(e[3]=t=>D.value=t),length:Math.ceil(z.value/C.value),"total-visible":l.$vuetify.display.xs?1:Math.min(Math.ceil(z.value/C.value),5),"active-color":"primary","next-icon":"tabler-caret-right","prev-icon":"tabler-caret-left"},null,8,["modelValue","length","total-visible"])])]),_:1},8,["items","items-per-page"])]),_:1}),M.value?(b(),V(_e,{key:0,isDialogVisible:M.value,"onUpdate:isDialogVisible":e[4]||(e[4]=t=>M.value=t)},null,8,["isDialogVisible"])):k("",!0),B.value?(b(),V(Ve,{key:1,isDialogVisible:B.value,"onUpdate:isDialogVisible":e[5]||(e[5]=t=>B.value=t),template:i.value},null,8,["isDialogVisible","template"])):k("",!0),a(S,{modelValue:$.value,"onUpdate:modelValue":e[9]||(e[9]=t=>$.value=t),persistent:"",class:"v-dialog-sm"},{default:o(()=>[a(I,{onClick:e[6]||(e[6]=t=>$.value=!1)}),a(h,null,{default:o(()=>[a(m,null,{default:o(()=>[n(" Are you sure you want to delete Industry: "+g(i.value.name)+"? ",1),Oe,n(" This action cannot be undone. ")]),_:1}),a(m,{class:"d-flex justify-end gap-3 flex-wrap"},{default:o(()=>[a(c,{color:"secondary",variant:"tonal",onClick:e[7]||(e[7]=t=>$.value=!1)},{default:o(()=>[n(" Cancel ")]),_:1}),a(c,{color:"error",onClick:e[8]||(e[8]=t=>pe(i.value.id))},{default:o(()=>[n(" Delete ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(S,{modelValue:f.value,"onUpdate:modelValue":e[13]||(e[13]=t=>f.value=t),persistent:"",class:"v-dialog-sm"},{default:o(()=>[a(I,{onClick:e[10]||(e[10]=t=>f.value=!1)}),a(h,null,{default:o(()=>[a(m,null,{default:o(()=>[n(" Are you sure you want to approve this Industry: "+g(i.value.name)+"? ",1),Ye,n(" This action cannot be undone. ")]),_:1}),a(m,{class:"d-flex justify-end gap-3 flex-wrap"},{default:o(()=>[a(c,{color:"secondary",variant:"tonal",onClick:e[11]||(e[11]=t=>f.value=!1)},{default:o(()=>[n(" Cancel ")]),_:1}),a(c,{color:"error",onClick:e[12]||(e[12]=t=>l.ApproveTemplate(i.value.id))},{default:o(()=>[n(" Delete ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(S,{modelValue:f.value,"onUpdate:modelValue":e[17]||(e[17]=t=>f.value=t),persistent:"",class:"v-dialog-sm"},{default:o(()=>[a(I,{onClick:e[14]||(e[14]=t=>f.value=!1)}),a(h,null,{default:o(()=>[a(m,null,{default:o(()=>[n(" Are you sure you want to approve this Industry: "+g(i.value.name)+"? ",1),He,n(" This action cannot be undone. ")]),_:1}),a(m,{class:"d-flex justify-end gap-3 flex-wrap"},{default:o(()=>[a(c,{color:"secondary",variant:"tonal",onClick:e[15]||(e[15]=t=>f.value=!1)},{default:o(()=>[n(" Cancel ")]),_:1}),a(c,{color:"success",onClick:e[16]||(e[16]=t=>re(i.value.id))},{default:o(()=>[n(" Approve ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(S,{modelValue:A.value,"onUpdate:modelValue":e[21]||(e[21]=t=>A.value=t),persistent:"",class:"v-dialog-sm"},{default:o(()=>[a(I,{onClick:e[18]||(e[18]=t=>A.value=!1)}),a(h,null,{default:o(()=>[a(m,null,{default:o(()=>[n(" Are you sure you want to Reject this Industry: "+g(i.value.name)+"? ",1),Qe,n(" This action cannot be undone. ")]),_:1}),a(m,{class:"d-flex justify-end gap-3 flex-wrap"},{default:o(()=>[a(c,{color:"secondary",variant:"tonal",onClick:e[19]||(e[19]=t=>A.value=!1)},{default:o(()=>[n(" Cancel ")]),_:1}),a(c,{color:"error",onClick:e[20]||(e[20]=t=>ue(i.value.id))},{default:o(()=>[n(" Reject ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(S,{modelValue:j.value,"onUpdate:modelValue":e[25]||(e[25]=t=>j.value=t),persistent:"",class:"v-dialog-sm"},{default:o(()=>[a(I,{onClick:e[22]||(e[22]=t=>j.value=!1)}),a(h,null,{default:o(()=>[a(m,null,{default:o(()=>[n(" Are you sure you want to Enable this Industry: "+g(i.value.name)+"? ",1),We,n(" This action cannot be undone. ")]),_:1}),a(m,{class:"d-flex justify-end gap-3 flex-wrap"},{default:o(()=>[a(c,{color:"secondary",variant:"tonal",onClick:e[23]||(e[23]=t=>j.value=!1)},{default:o(()=>[n(" Cancel ")]),_:1}),a(c,{color:"success",onClick:e[24]||(e[24]=t=>de(i.value.id))},{default:o(()=>[n(" Enable ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(S,{modelValue:T.value,"onUpdate:modelValue":e[29]||(e[29]=t=>T.value=t),persistent:"",class:"v-dialog-sm"},{default:o(()=>[a(I,{onClick:e[26]||(e[26]=t=>T.value=!1)}),a(h,null,{default:o(()=>[a(m,null,{default:o(()=>[n(" Are you sure you want to Disable this Industry: "+g(i.value.name)+"? ",1),Le,n(" This action cannot be undone. ")]),_:1}),a(m,{class:"d-flex justify-end gap-3 flex-wrap"},{default:o(()=>[a(c,{color:"secondary",variant:"tonal",onClick:e[27]||(e[27]=t=>T.value=!1)},{default:o(()=>[n(" Cancel ")]),_:1}),a(c,{color:"error",onClick:e[28]||(e[28]=t=>ce(i.value.id))},{default:o(()=>[n(" Disable ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}});export{Yt as default};
