import{_ as Z}from"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-9e7a34d5.js";import{_ as ee}from"./AppSelect.vue_vue_type_script_setup_true_lang-67ce80f3.js";import{_ as te}from"./AppTextField.vue_vue_type_script_setup_true_lang-298ad98d.js";import{u as D,w as ae}from"./xlsx-d63df831.js";import{_ as oe}from"./EditIndustryDialog.vue_vue_type_script_setup_true_lang-d42cea87.js";import{_ as le}from"./AddIndustryDialog.vue_vue_type_script_setup_true_lang-2551a1ef.js";import{u as se}from"./useApi-c9327355.js";import{c as ie}from"./createUrl-3e678c2b.js";import{$ as k}from"./api-44dd0fa9.js";import{d as re,r as s,b6 as ne,R as N,o as $,c as ue,b as a,f as l,e as r,a4 as b,x as m,p as ce,y as p,t as me,a9 as A,h as P,A as z,F as pe,a as de}from"./index-5caaa453.js";import{V as ve}from"./VDataTable-1493872b.js";import{V as fe}from"./VChip-49676f7d.js";import{V as _e}from"./VDivider-d40713ce.js";import{V as Ve}from"./VPagination-4169e3c5.js";import{V as F}from"./VCard-1a5b2c5e.js";import{V as M}from"./VCardText-3b4da816.js";import{V as ye}from"./VDialog-808ce03e.js";import"./form-c9c578a3.js";import"./VSelect-f0a443ce.js";import"./VTextField-604d91ff.js";/* empty css                   */import"./VCounter-728f7f8c.js";import"./transition-1886cce0.js";import"./VField-6b3808ed.js";import"./easing-9f15041e.js";import"./VInput-e87890b4.js";import"./forwardRefs-8348545e.js";import"./index-7dd1f5f0.js";import"./VList-4b1bf96e.js";import"./ssrBoot-2696bccc.js";import"./createSimpleFunctional-9624028d.js";import"./VAvatar-3ee4c690.js";import"./VImg-6009f8f0.js";import"./dialog-transition-1ae6ec72.js";import"./VMenu-97c48b4e.js";import"./VOverlay-da001e16.js";import"./lazy-9cd674a5.js";import"./scopeId-484eb469.js";import"./VCheckboxBtn-1d552264.js";import"./VSelectionControl-e0df1dbd.js";import"./VRow-e44df108.js";/* empty css              */import"./VCol-bcc5388c.js";import"./index-2898f57d.js";import"./VTable-f9bab7db.js";import"./filter-aecd5fc1.js";const xe={class:"d-flex flex-wrap gap-4 mx-5 my-5"},be={class:"d-flex align-center"},ge={class:"d-flex gap-4 flex-wrap align-center"},we={class:"text-h6"},he={href:"javascript:void(0)"},Ce={class:"d-flex align-center justify-space-between flex-wrap gap-3 pa-5 pt-3"},De={class:"text-sm text-medium-emphasis mb-0"},ke=r("br",null,null,-1),gt=re({__name:"industries",async setup($e){let d,T;const g=s(""),w=s(),i=s(10),u=s(1),q=s(),H=s(),c=s(null);s();const v=s(!1),n=s(!1),f=s(!1),R=o=>{c.value=o,n.value=!0},L=o=>{c.value=o,v.value=!0},Q=()=>{f.value=!0},G=s([{title:"Active",value:"active"},{title:"In active",value:"inactive"}]),B=o=>o==="active"?{text:"Active",color:"success"}:{text:"Inactive",color:"error"},h=o=>o==="active"?{color:"error",icon:"tabler-thumb-down",action:W}:{color:"success",icon:"tabler-thumb-up",action:O},J=[{title:"Name",key:"name"},{title:"Status",key:"status"},{title:"Actions",key:"actions",sortable:!1}],{data:I,execute:_}=([d,T]=ne(()=>se(ie("/industries",{query:{q:g,status:w,itemsPerPage:i,page:u,sortBy:q,orderBy:H}}))),d=await d,T(),d),S=N(()=>I.value.data),V=N(()=>I.value.total);_();const K=async o=>{try{await k(`/industries/${o}`,{method:"DELETE",onResponseError({response:e}){errors.value=e._data.errors}}),await _(),n.value=!1}catch(e){console.error(e)}},O=async o=>{try{await k(`/industries/${o}/activate`,{method:"PATCH"}),await _()}catch(e){console.error(e)}},W=async o=>{try{await k(`/industries/${o}/deactivate`,{method:"PATCH"}),await _()}catch(e){console.error(e)}},X=()=>{const o=D.json_to_sheet(S.value.map(y=>({Name:y.name,Status:B(y.status).text}))),e=D.book_new();D.book_append_sheet(e,o,"Industries"),ae(e,"industries.xlsx")};return(o,e)=>{const y=te,U=ee,C=de("IconBtn"),Y=Z;return $(),ue(pe,null,[a(F,{class:"mb-6"},{default:l(()=>[r("div",xe,[r("div",be,[a(y,{modelValue:g.value,"onUpdate:modelValue":e[0]||(e[0]=t=>g.value=t),class:"me-3","clear-icon":"tabler-circle-x",clearable:"",color:"primary",placeholder:"Search",style:{"inline-size":"200px"},type:"text"},null,8,["modelValue"]),a(U,{modelValue:w.value,"onUpdate:modelValue":e[1]||(e[1]=t=>w.value=t),items:G.value,class:"me-3","clear-icon":"tabler-x",clearable:"",placeholder:"Status",style:{"inline-size":"100px"}},null,8,["modelValue","items"])]),r("div",ge,[a(U,{modelValue:i.value,"onUpdate:modelValue":e[2]||(e[2]=t=>i.value=t),items:[5,10,20,25,50]},null,8,["modelValue"]),a(b,{color:"primary","prepend-icon":"tabler-download",style:{"text-size-adjust":"auto","text-transform":"none"},onClick:X}),a(b,{color:"primary","prepend-icon":"tabler-plus",style:{"text-size-adjust":"auto","text-transform":"none"},onClick:Q},{default:l(()=>[m(" Add Industry ")]),_:1})])]),a(ce(ve),{headers:J,items:S.value,"items-per-page":i.value,class:"text-no-wrap"},{"item.name":l(({item:t})=>[r("h6",we,[r("a",he,p(t.name),1)])]),"item.status":l(({item:t})=>[a(fe,me({density:"default",label:""},B(t.status)),null,16)]),"item.actions":l(({item:t})=>[a(C,{onClick:x=>L(t)},{default:l(()=>[a(A,{icon:"tabler-pencil",color:"warning"})]),_:2},1032,["onClick"]),a(C,null,{default:l(()=>{var x,j;return[a(A,{icon:(x=h(t.status))==null?void 0:x.icon,color:(j=h(t.status))==null?void 0:j.color,title:t.status,onClick:Ae=>{var E;return(E=h(t.status))==null?void 0:E.action(t.id)}},null,8,["icon","color","title","onClick"])]}),_:2},1024),a(C,null,{default:l(()=>[a(A,{icon:"tabler-trash",color:"error",onClick:x=>R(t)},null,8,["onClick"])]),_:2},1024)]),bottom:l(()=>[a(_e),r("div",Ce,[r("p",De," Showing "+p((u.value-1)*i.value+1)+" to "+p(Math.min(u.value*i.value,V.value))+" of "+p(V.value)+" entries ",1),a(Ve,{modelValue:u.value,"onUpdate:modelValue":e[3]||(e[3]=t=>u.value=t),length:Math.ceil(V.value/i.value),"total-visible":o.$vuetify.display.xs?1:Math.min(Math.ceil(V.value/i.value),5),"active-color":"primary","next-icon":"tabler-caret-right","prev-icon":"tabler-caret-left"},null,8,["modelValue","length","total-visible"])])]),_:1},8,["items","items-per-page"])]),_:1}),f.value?($(),P(le,{key:0,isDialogVisible:f.value,"onUpdate:isDialogVisible":e[4]||(e[4]=t=>f.value=t)},null,8,["isDialogVisible"])):z("",!0),v.value?($(),P(oe,{key:1,isDialogVisible:v.value,"onUpdate:isDialogVisible":e[5]||(e[5]=t=>v.value=t),template:c.value},null,8,["isDialogVisible","template"])):z("",!0),a(ye,{modelValue:n.value,"onUpdate:modelValue":e[9]||(e[9]=t=>n.value=t),persistent:"",class:"v-dialog-sm"},{default:l(()=>[a(Y,{onClick:e[6]||(e[6]=t=>n.value=!1)}),a(F,null,{default:l(()=>[a(M,null,{default:l(()=>[m(" Are you sure you want to delete Industry: "+p(c.value.name)+"? ",1),ke,m(" This action cannot be undone. ")]),_:1}),a(M,{class:"d-flex justify-end gap-3 flex-wrap"},{default:l(()=>[a(b,{color:"secondary",variant:"tonal",onClick:e[7]||(e[7]=t=>n.value=!1)},{default:l(()=>[m(" Cancel ")]),_:1}),a(b,{color:"error",onClick:e[8]||(e[8]=t=>K(c.value.id))},{default:l(()=>[m(" Delete ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}});export{gt as default};
